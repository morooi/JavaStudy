# Java Web ç¬”è®°

[TOC]

## HTML

### ç‰¹æ®Šå­—ç¬¦

å¸¸ç”¨çš„ç‰¹æ®Šå­—ç¬¦ï¼š

| å­—ç¬¦ | å®ä½“æ ‡ç­¾ |
| :--: | :------: |
|  >   |  \&lt;   |
|  <   |  \&gt;   |
| ç©ºæ ¼ | \&nbsp;  |

### è¶…é“¾æ¥

`<a></a> ` æ ‡ç­¾æ˜¯è¶…é“¾æ¥

`href` å±æ€§è®¾ç½®è¿æ¥çš„åœ°å€

`target` å±æ€§è®¾ç½®å“ªä¸ªç›®æ ‡è¿›è¡Œè·³è½¬

â€‹	`_self`ï¼šè¡¨ç¤ºå½“å‰é¡µé¢(é»˜è®¤å€¼)

â€‹	`_blank`ï¼šè¡¨ç¤ºæ‰“å¼€æ–°é¡µé¢æ¥è¿›è¡Œè·³è½¬

``` html
<a href="https://morooi.cn">morooi</a><br/>
<a href="https://morooi.cn" target="_self">morooi_self</a><br/>
<a href="https://morooi.cn" target="_blank">morooi_blank</a><br/>
```

### åˆ—è¡¨æ ‡ç­¾

`<ul></ul>`ï¼šæ— åºåˆ—è¡¨ï¼Œ`type` å±æ€§å¯ä»¥ä¿®æ”¹åˆ—è¡¨é¡¹å‰é¢çš„ç¬¦å·

`<ol></ol>`ï¼šæœ‰åºåˆ—è¡¨

`<li></li>`ï¼šåˆ—è¡¨é¡¹

ä¾‹ï¼š

``` html
<!-- æ— åºåˆ—è¡¨ -->
<ul type="none">
  <li>èµµå››</li>
  <li>åˆ˜èƒ½</li>
  <li>å°æ²ˆé˜³</li>
  <li>å®‹å°å®</li>
</ul>

<!-- æœ‰åºåˆ—è¡¨ -->
<ol>
  <li>èµµå››</li>
  <li>åˆ˜èƒ½</li>
  <li>å°æ²ˆé˜³</li>
  <li>å®‹å°å®</li>
</ol>
```

### å›¾ç‰‡æ ‡ç­¾

`<img />`ï¼šå›¾ç‰‡æ ‡ç­¾ï¼Œç”¨æ¥æ˜¾ç¤ºå›¾ç‰‡

`src` å±æ€§è®¾ç½®å›¾ç‰‡çš„è·¯å¾„

` width` å±æ€§è®¾ç½®å›¾ç‰‡çš„å®½åº¦

`height` å±æ€§è®¾ç½®å›¾ç‰‡çš„é«˜åº¦

`border` å±æ€§è®¾ç½®å›¾ç‰‡è¾¹æ¡†å¤§å°

`alt` å±æ€§è®¾ç½®å½“æŒ‡å®šè·¯å¾„æ‰¾ä¸åˆ°å›¾ç‰‡æ—¶,ç”¨æ¥ä»£æ›¿æ˜¾ç¤ºçš„æ–‡æœ¬å†…å®¹

``` html
<img src="1.jpg" width="200" height="260" border="1" alt="ç¾å¥³æ‰¾ä¸åˆ°"/>
<img src="../../2.jpg" width="200" height="260" />
<img src="../imgs/3.jpg" width="200" height="260" />
```

### è¡¨æ ¼æ ‡ç­¾

`<table></table>`ï¼šè¡¨æ ¼æ ‡ç­¾

`border`ï¼šè®¾ç½®è¡¨æ ¼è¾¹æ¡†

`width`ï¼šè®¾ç½®è¡¨æ ¼å®½åº¦

`height`ï¼šè®¾ç½®è¡¨æ ¼é«˜åº¦

`align`ï¼šè®¾ç½®è¡¨æ ¼ç›¸å¯¹äºé¡µé¢çš„å¯¹é½æ–¹å¼

`cellspacing`ï¼šè®¾ç½®å•å…ƒæ ¼é—´è·



`<tr></tr>`ï¼šè¡Œæ ‡ç­¾

`<th></th>`ï¼šè¡¨å¤´æ ‡ç­¾

`<td></td>`ï¼šå•å…ƒæ ¼æ ‡ç­¾

`align`ï¼šè®¾ç½®å•å…ƒæ ¼æ–‡æœ¬å¯¹é½æ–¹å¼

è¡¥å……ï¼š`b`ï¼šåŠ ç²—

``` html
<table align="center" border="1" width="300" height="300" cellspacing="0">
    <tr>
        <th>1.1</th>
        <th>1.2</th>
        <th>1.3</th>
    </tr>
    <tr>
        <td>2.1</td>
        <td>2.2</td>
        <td>2.3</td>
    </tr>
    <tr>
        <td>3.1</td>
        <td>3.2</td>
        <td>3.3</td>
    </tr>
</table>
```

è·¨è¡Œè·¨åˆ—è¡¨æ ¼

`colspan`ï¼šå±æ€§è®¾ç½®è·¨åˆ—

`rowspan`ï¼šå±æ€§è®¾ç½®è·¨è¡Œ

``` html
<!-- 
æ–°å»ºä¸€ä¸ªäº”è¡Œï¼Œäº”åˆ—çš„è¡¨æ ¼ï¼Œ
ç¬¬ä¸€è¡Œï¼Œç¬¬ä¸€åˆ—çš„å•å…ƒæ ¼è¦è·¨ä¸¤åˆ—ï¼Œ
ç¬¬äºŒè¡Œç¬¬ä¸€åˆ—çš„å•å…ƒæ ¼è·¨ä¸¤è¡Œï¼Œ
ç¬¬å››è¡Œç¬¬å››åˆ—çš„å•å…ƒæ ¼è·¨ä¸¤è¡Œä¸¤åˆ—ã€‚
-->

<table width="500" height="500" cellspacing="0" border="1">
  <tr>
    <td colspan="2">1.1</td>
    <td>1.3</td>
    <td>1.4</td>
    <td>1.5</td>
  </tr>
  <tr>
    <td rowspan="2">2.1</td>
    <td>2.2</td>
    <td>2.3</td>
    <td>2.4</td>
    <td>2.5</td>
  </tr>
  <tr>
    <td>3.2</td>
    <td>3.3</td>
    <td>3.4</td>
    <td>3.5</td>
  </tr>
  <tr>
    <td>4.1</td>
    <td>4.2</td>
    <td>4.3</td>
    <td colspan="2" rowspan="2">4.4</td>
  </tr>
  <tr>
    <td>5.1</td>
    <td>5.2</td>
    <td>5.3</td>
  </tr>
</table>
```

### iframe æ¡†æ¶æ ‡ç­¾

`<iframe></iframe>` æ ‡ç­¾å¯ä»¥åœ¨é¡µé¢ä¸Šå¼€è¾Ÿä¸€ä¸ªå°åŒºåŸŸæ˜¾ç¤ºä¸€ä¸ªå•ç‹¬çš„é¡µé¢

ifarme å’Œ a æ ‡ç­¾ç»„åˆä½¿ç”¨çš„æ­¥éª¤:

1. åœ¨ iframe æ ‡ç­¾ä¸­ä½¿ç”¨ name å±æ€§å®šä¹‰ä¸€ä¸ªåç§°

2. åœ¨ a æ ‡ç­¾çš„ target å±æ€§ä¸Šè®¾ç½® iframe çš„ name çš„å±æ€§å€¼

``` html
<iframe src="3.æ ‡é¢˜æ ‡ç­¾.html" width="500" height="400" name="abc"></iframe>
<br/>
<ul>
  <li><a href="0-æ ‡ç­¾è¯­æ³•.html" target="abc">0-æ ‡ç­¾è¯­æ³•.html</a></li>
  <li><a href="1.fontæ ‡ç­¾.html" target="abc">1.fontæ ‡ç­¾.html</a></li>
  <li><a href="2.ç‰¹æ®Šå­—ç¬¦.html" target="abc">2.ç‰¹æ®Šå­—ç¬¦.html</a></li>
</ul>
```

### è¡¨å•æ ‡ç­¾ï¼ˆé‡ç‚¹ï¼‰

è¡¨å•å°±æ˜¯ html é¡µé¢ä¸­ï¼Œç”¨æ¥æ”¶é›†ç”¨æˆ·ä¿¡æ¯çš„æ‰€æœ‰å…ƒç´ é›†åˆï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨

`<form></form>`ï¼šè¡¨å•æ ‡ç­¾

â€‹	`action` å±æ€§è®¾ç½®æäº¤çš„æœåŠ¡å™¨åœ°å€

â€‹	`method` å±æ€§è®¾ç½®æäº¤çš„æ–¹å¼ GET(é»˜è®¤å€¼)æˆ– POST

`<input type="text">`ï¼šæ–‡ä»¶è¾“å…¥æ¡†ï¼Œ`value` è®¾ç½®é»˜è®¤æ˜¾ç¤ºå†…å®¹

`<input type="password">`ï¼šå¯†ç è¾“å…¥æ¡†ï¼Œ`value` è®¾ç½®é»˜è®¤æ˜¾ç¤ºå†…å®¹

`<input type="radio">`ï¼šå•é€‰æ¡†ï¼Œ`name` å±æ€§å¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†ç»„ï¼Œ`checked="checked"`è¡¨ç¤ºé»˜è®¤é€‰ä¸­

`<input type="checkbox">`ï¼šå¤é€‰æ¡†ï¼Œ`checked="checked"`è¡¨ç¤ºé»˜è®¤é€‰ä¸­

`<input type="reset">`ï¼šé‡ç½®æŒ‰é’®ï¼Œ`value` å±æ€§ä¿®æ”¹æŒ‰é’®ä¸Šçš„æ–‡æœ¬

`<input type="submit">`ï¼šæäº¤æŒ‰é’®ï¼Œ `value` å±æ€§ä¿®æ”¹æŒ‰é’®ä¸Šçš„æ–‡æœ¬

`<input type="button">`ï¼šæŒ‰é’®ï¼Œ `value` å±æ€§ä¿®æ”¹æŒ‰é’®ä¸Šçš„æ–‡æœ¬

`<input type="file">`ï¼šæ–‡ä»¶ä¸Šä¼ åŸŸ

`<input type="hidden">`ï¼šéšè—åŸŸã€‚å½“è¦å‘é€æŸäº›ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯ï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ï¼Œå°±å¯ä»¥ä½¿ç”¨éšè—åŸŸï¼ˆæäº¤çš„æ—¶å€™åŒæ—¶å‘é€ç»™æœåŠ¡å™¨ï¼‰



`<select></select>` ï¼šä¸‹æ‹‰åˆ—è¡¨æ¡†æ ‡ç­¾

`<option></option>` æ ‡ç­¾ï¼šä¸‹æ‹‰åˆ—è¡¨æ¡†ä¸­çš„é€‰é¡¹ `selected="selected"` è¡¨ç¤ºé»˜è®¤é€‰ä¸­

`<textarea></textarea>`ï¼šå¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡† ï¼ˆèµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹æ˜¯é»˜è®¤å€¼ï¼‰

â€‹	`row `å±æ€§è®¾ç½®å¯ä»¥æ˜¾ç¤ºå‡ è¡Œçš„é«˜åº¦

â€‹	`cols` å±æ€§è®¾ç½®æ¯è¡Œå¯ä»¥æ˜¾ç¤ºå‡ ä¸ªå­—ç¬¦å®½åº¦

``` html
<form action="localhost/check.jsp" method="post">
  <h1 align="center">ç”¨æˆ·æ³¨å†Œ</h1>
  <table align="center">
    <tr>
      <td>ç”¨æˆ·åç§°ï¼š</td>
      <td>
        <input type="text" name="useranme" value="é»˜è®¤å€¼"/>
      </td>
    </tr>
    <tr>
      <td>ç”¨æˆ·å¯†ç ï¼š</td>
      <td><input type="password" name="password" value="abc"/></td>
    </tr>
    <tr>
      <td>ç¡®è®¤å¯†ç ï¼š</td>
      <td><input type="password" value="abc"/></td>
    </tr>
    <tr>
      <td>æ€§åˆ«ï¼š</td>
      <td>
        <input type="radio" name="sex" value="male"/>ç”·
        <input type="radio" name="sex" value="female" checked="checked"/>å¥³
      </td>
    </tr>
    <tr>
      <td>å…´è¶£çˆ±å¥½ï¼š</td>
      <td>
        <input type="checkbox" name="hobby" value="java" checked="checked" />Java
        <input type="checkbox" name="hobby" value="js"/>JavaScript
        <input type="checkbox" name="hobby" value="cpp"/>C++
      </td>
    </tr>
    <tr>
      <td>å›½ç±ï¼š</td>
      <td>
        <select name="country">
          <option>--è¯·é€‰æ‹©å›½ç±--</option>
          <option value="CN" selected="selected">ä¸­å›½</option>
          <option value="USA">ç¾å›½</option>
          <option value="JP">æ—¥æœ¬</option>
        </select>
      </td>
    </tr>
    <tr>
      <td>è‡ªæˆ‘è¯„ä»·ï¼š</td>
      <td><textarea name="desc" rows="10" cols="20">æˆ‘æ‰æ˜¯é»˜è®¤å€¼</textarea></td>
    </tr>
    <tr>
      <td><input type="reset"/></td>
      <td align="center" ><input type="submit"/></td>
    </tr>
  </table>
</form>
```



**è¡¨å•æäº¤çš„æ—¶å€™ï¼Œæ•°æ®æ²¡æœ‰å‘é€ç»™æœåŠ¡å™¨çš„ä¸‰ç§æƒ…å†µï¼š**

1. è¡¨å•é¡¹æ²¡æœ‰ `name` å±æ€§å€¼
2. å•é€‰ã€å¤é€‰ï¼ˆä¸‹æ‹‰åˆ—è¡¨ä¸­çš„ `option` æ ‡ç­¾ï¼‰éƒ½éœ€è¦æ·»åŠ  `value` å±æ€§ï¼Œä»¥ä¾¿å‘é€ç»™æœåŠ¡å™¨
3. è¡¨å•é¡¹ä¸åœ¨æäº¤çš„ `form` æ ‡ç­¾ä¸­



GET è¯·æ±‚çš„ç‰¹ç‚¹ï¼š

1. æµè§ˆå™¨åœ°å€æ ä¸­çš„åœ°å€æ˜¯ï¼šURL?è¯·æ±‚å‚æ•°ã€‚è¯·æ±‚å‚æ•°çš„æ ¼å¼æ˜¯ï¼šname=value&name=value

2. ä¸å®‰å…¨ï¼Œæ•°æ®ä¼šæš´éœ²åœ¨åœ°å€æ ä¸­

3. å®ƒæœ‰æ•°æ®é•¿åº¦çš„é™åˆ¶ï¼ˆ100ä¸ªå­—ç¬¦ï¼‰

POSTè¯·æ±‚çš„ç‰¹ç‚¹ï¼š

1. æµè§ˆå™¨åœ°å€æ ä¸­åªæœ‰ form ä¸­ action çš„ç›®æ ‡åœ°å€å€¼

2. ç›¸å¯¹äº GET è¯·æ±‚è¦å®‰å…¨

3. ç†è®ºä¸Šæ²¡æœ‰æ•°æ®é•¿åº¦çš„é™åˆ¶

### å…¶ä»–æ ‡ç­¾

`<div></div>` æ ‡ç­¾ï¼Œé»˜è®¤ç‹¬å ä¸€è¡Œ

`<span></span>` æ ‡ç­¾ï¼Œå®ƒçš„é•¿åº¦æ˜¯å°è£…æ•°æ®çš„é•¿åº¦

`<p></p>`ï¼šæ®µè½æ ‡ç­¾ï¼Œé»˜è®¤ä¼šåœ¨æ®µè½çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹å„ç©ºå‡ºä¸€è¡Œæ¥ï¼ˆå¦‚æœå·²æœ‰å°±ä¸å†ç©ºï¼‰

## CSS

### æ ‡ç­¾åé€‰æ‹©å™¨

æ ‡ç­¾åé€‰æ‹©å™¨å¯ä»¥å†³å®šå“ªäº›æ ‡ç­¾è¢«åŠ¨çš„ä½¿ç”¨è¿™ä¸ªæ ·å¼

æ ¼å¼ï¼š

æ ‡ç­¾å {
â€‹	å±æ€§: å€¼;
}

``` html
<style type="text/css">
  div{
    border: 1px solid yellow;
    color: blue;
    font-size: 30px;
  }
  span{
    border: 5px dashed blue;
    color: yellow;
    font-size: 20px;
  }
</style>

<body>
  <!-- 
  åœ¨æ‰€æœ‰ div æ ‡ç­¾ä¸Šä¿®æ”¹å­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å° 30pxã€‚è¾¹æ¡†ä¸º 1px é»„è‰²å®çº¿ã€‚
  å¹¶ä¸”ä¿®æ”¹æ‰€æœ‰ span æ ‡ç­¾çš„å­—ä½“é¢œè‰²ä¸ºé»„è‰²ï¼Œå­—ä½“å¤§å°20pxã€‚è¾¹æ¡†ä¸º 5px è“è‰²è™šçº¿ã€‚
  -->
  <div>divæ ‡ç­¾1</div>
  <div>divæ ‡ç­¾2</div>
  <span>spanæ ‡ç­¾1</span>
  <span>spanæ ‡ç­¾2</span>
</body>
```

### id é€‰æ‹©å™¨

id é€‰æ‹©å™¨å¯ä»¥è®©æˆ‘ä»¬é€šè¿‡ id å±æ€§é€‰æ‹©æ€§çš„å»ä½¿ç”¨è¿™ä¸ªæ ·å¼

æ ¼å¼ï¼š

\#id å±æ€§å€¼ {
â€‹	å±æ€§: å€¼;
}

``` html
<style type="text/css">
  #id001 {
    color: blue;
    font-size: 30px;
    border: 1px yellow solid;
  }
  #id002 {
    color: red;
    font-size: 20px;
    border: 5px blue dotted ;
  }

</style>

<body>		
  <!--
  åˆ†åˆ«å®šä¹‰ä¸¤ä¸ª div æ ‡ç­¾
  ç¬¬ä¸€ä¸ª div æ ‡ç­¾å®šä¹‰ id ä¸º id001ï¼Œæ ¹æ® id å±æ€§å®šä¹‰ css æ ·å¼ä¿®æ”¹å­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å° 30pxã€‚è¾¹æ¡†ä¸º 1px é»„è‰²å®çº¿ã€‚
  ç¬¬äºŒä¸ª div æ ‡ç­¾å®šä¹‰ id ä¸º id002ï¼Œæ ¹æ® id å±æ€§å®šä¹‰ css æ ·å¼ä¿®æ”¹å­—ä½“é¢œè‰²ä¸ºçº¢è‰²ï¼Œå­—ä½“å¤§å° 20pxã€‚è¾¹æ¡†ä¸º 5px è“è‰²ç‚¹çº¿ã€‚
   -->
  <div id="id002">divæ ‡ç­¾1</div>
  <div id="id001">divæ ‡ç­¾2</div>
</body>
```

### class é€‰æ‹©å™¨

åˆå«ç±»å‹é€‰æ‹©å™¨ï¼Œå¯ä»¥é€šè¿‡ class å±æ€§æœ‰æ•ˆçš„é€‰æ‹©æ€§åœ°å»ä½¿ç”¨æ ·å¼

æ ¼å¼ï¼š

.class å±æ€§å€¼ {
â€‹	å±æ€§: å€¼;
}

``` html
<style type="text/css">
  .class01{
    color: blue;
    font-size: 30px;
    border: 1px solid yellow;
  }
  .class02{
    color: grey;
    font-size: 26px;
    border: 1px solid red;
  }
</style>

<body>
  <!--
  ä¿®æ”¹ class å±æ€§å€¼ä¸º class01 çš„ span æˆ– div æ ‡ç­¾ï¼Œå­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å° 30pxã€‚è¾¹æ¡†ä¸º 1px é»„è‰²å®çº¿ã€‚
  ä¿®æ”¹ class å±æ€§å€¼ä¸º class02 çš„ div æ ‡ç­¾ï¼Œå­—ä½“é¢œè‰²ä¸ºç°è‰²ï¼Œå­—ä½“å¤§å° 26pxã€‚è¾¹æ¡†ä¸º 1px çº¢è‰²å®çº¿ã€‚
   -->
  <div class="class01">divæ ‡ç­¾class01</div>
  <div class="class02">divæ ‡ç­¾</div>
  <span class="class02">spanæ ‡ç­¾class01</span>
  <span>spanæ ‡ç­¾2</span>
</body>
```

### ç»„åˆé€‰æ‹©å™¨

ç»„åˆé€‰æ‹©å™¨å¯ä»¥è®©å¤šä¸ªé€‰æ‹©å™¨å…±ç”¨åŒä¸€ä¸ª css æ ·å¼ä»£ç 

æ ¼å¼ï¼š

é€‰æ‹©å™¨1, é€‰æ‹©å™¨2, é€‰æ‹©å™¨n {
â€‹	å±æ€§: å€¼;
}

``` html
<style type="text/css">
  .class01,
  #id01 {
    color: blue;
    font-size: 20px;
    border:  yellow 1px solid;
  }
</style>

<body>
  <!-- 
  éœ€æ±‚1ï¼šä¿®æ”¹ class="class01" çš„div æ ‡ç­¾ å’Œ id="id01" æ‰€æœ‰çš„spanæ ‡ç­¾ï¼Œ
  å­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å°20ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º1åƒç´ é»„è‰²å®çº¿ã€‚
   -->
   <div id="id01">divæ ‡ç­¾class01</div><br/>
   <span class="class01">span æ ‡ç­¾</span><br/>
   <div>divæ ‡ç­¾</div> <br/>
   <div>divæ ‡ç­¾id01</div><br/>
</body>
```

### å¸¸ç”¨æ ·å¼

1. å­—ä½“é¢œè‰²ï¼šcolor

2. å®½åº¦ï¼Œé«˜åº¦ï¼šwidth, height

3. èƒŒæ™¯é¢œè‰²ï¼šbackgroud-color

4. å­—ä½“å¤§å°ï¼šfont-size

5. è¾¹æ¡†ï¼šborder

6. div å±…ä¸­ï¼š

   ``` css
   margin-left: auto;
   margin-right: auto;
   ```

7. æ–‡æœ¬å±…ä¸­ï¼štext-align: center;

8. è¶…é“¾æ¥å»ä¸‹åˆ’çº¿ï¼štext-decoration: none;

9. è¡¨æ ¼ç»†çº¿ï¼š

   ``` css
   table {
     border: 1px solid red; /*è®¾ç½®è¾¹æ¡†*/
     border-collapse: collapse; /*å°†è¾¹æ¡†åˆå¹¶*/
   }
   td, th {
     border: 1px solid red; /*è®¾ç½®è¾¹æ¡†*/
   }
   ```

10. åˆ—è¡¨å»é™¤ä¿®é¥°ï¼ˆç¼–å·ç­‰ï¼‰

    ``` css
    ul{
      list-style: none;
    }
    ```

## JavaScript

JS æ˜¯å¼±ç±»å‹è¯­è¨€

ç‰¹ç‚¹ï¼š

* äº¤äº’æ€§ï¼ˆå¯ä»¥åšçš„å°±æ˜¯ä¿¡æ¯çš„åŠ¨æ€äº¤äº’ï¼‰
* å®‰å…¨æ€§ï¼ˆä¸å…è®¸ç›´æ¥è®¿é—®æœ¬åœ°ç¡¬ç›˜ï¼‰
* è·¨å¹³å°æ€§ï¼ˆåªè¦æ˜¯å¯ä»¥è§£é‡Š JS çš„æµè§ˆå™¨éƒ½å¯ä»¥æ‰§è¡Œï¼Œå’Œå¹³å°æ— å…³ï¼‰

### JavaScript å’Œ html ä»£ç çš„ç»“åˆæ–¹å¼

æ–¹å¼ä¸€ï¼šåœ¨ head æˆ– body æ ‡ç­¾ä¸­ï¼Œä½¿ç”¨  `<script><script/>` æ ‡ç­¾æ¥ä¹¦å†™ JavaScript ä»£ç 

æ–¹å¼äºŒï¼šä½¿ç”¨  `<script><script/>` æ ‡ç­¾å¼•å…¥å•ç‹¬çš„ JavaScript ä»£ç æ–‡ä»¶

``` html
<head>
  <script type="text/javascript">
    // alertæ˜¯JavaScriptè¯­è¨€æä¾›çš„ä¸€ä¸ªè­¦å‘Šæ¡†å‡½æ•°ã€‚
    alert("Hello JavaScript!");
  </script>

  <script type="text/javascript" src="test.js"></script>
</head>

<body>
  <script type="text/javascript">
    // alertæ˜¯JavaScriptè¯­è¨€æä¾›çš„ä¸€ä¸ªè­¦å‘Šæ¡†å‡½æ•°ã€‚
    alert("Hello JavaScript!");
  </script>
</body>
```

### å˜é‡

#### JavaScript çš„å˜é‡ç±»å‹

* æ•°å€¼ç±»å‹ï¼šnumber
* å­—ç¬¦ä¸²ç±»å‹ï¼šstring
* å¯¹è±¡ç±»å‹ï¼šobject
* å¸ƒå°”ç±»å‹ï¼šboolean
* å‡½æ•°ç±»å‹ï¼šfunction

#### JavaScript é‡Œç‰¹æ®Šçš„å€¼

* undefinedï¼šæœªå®šä¹‰ï¼Œæ‰€æœ‰ JS å˜é‡æœªèµ‹ä¸åˆå§‹å€¼çš„æ—¶å€™ï¼Œé»˜è®¤å€¼éƒ½æ˜¯ undefined
* nullï¼šç©ºå€¼
* NANï¼šå…¨ç§°æ˜¯ Not a numberã€‚éæ•°å­—ã€éæ•°å€¼

#### JavaStript ä¸­çš„å®šä¹‰å˜é‡æ ¼å¼ï¼š

  ``` javascript
// var å˜é‡å;
// var å˜é‡å = å€¼;

var i;
// alert(i); // undefined
i = 12;
// typeof() æ˜¯ JavaScript è¯­è¨€æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥å–å˜é‡çš„æ•°æ®ç±»å‹è¿”å›
// alert(typeof(i)); // number

i = "abc";
// alert(typeof(i)); // String

var a = 12;
var b = "abc";
alert( a * b ); // NaNï¼Œéæ•°å­—ï¼Œéæ•°å€¼ã€‚
  ```

### å…³ç³»ï¼ˆæ¯”è¾ƒï¼‰è¿ç®—

ç­‰äºï¼š`==`				ï¼ˆç®€å•çš„åšå­—é¢å€¼çš„æ¯”è¾ƒï¼‰

å…¨ç­‰äºï¼š`===`		 ï¼ˆé™¤äº†åšå­—é¢å€¼çš„æ¯”è¾ƒä¹‹å¤–ï¼Œè¿˜ä¼šæ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ï¼‰

``` javascript
var a = "12"; // string
var b = 12;	// number

alert( a == b ); // true
alert( a === b ); // false
```

### é€»è¾‘è¿ç®—

> åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ª boolean ç±»å‹çš„å˜é‡å»ä½¿ç”¨
>
> *0, null, undefined, ""(ç©ºä¸²)* éƒ½è®¤ä¸ºæ˜¯ false

ä¸”è¿ç®—ï¼š`&&`

æˆ–è¿ç®—ï¼š`||`

å–åè¿ç®—ï¼š`!`

``` javascript
var a = 0;
if (a) {
  alert("é›¶ä¸ºçœŸ");
} else {
  alert("é›¶ä¸ºå‡"); // <-- ç»“æœ
}

var b = null;
if (b) {
  alert("nullä¸ºçœŸ");
} else {
  alert("nullä¸ºå‡"); // <-- ç»“æœ
}

var c = undefined;
if (c) {
  alert("undefined ä¸ºçœŸ");
} else {
  alert("undefined ä¸ºå‡"); // <-- ç»“æœ
}

var d = "";
if (d) {
  alert("ç©ºä¸²ä¸ºçœŸ");
} else {
  alert("ç©ºä¸²ä¸ºå‡"); // <-- ç»“æœ
}

/*	
&& ä¸”è¿ç®—ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š
ç¬¬ä¸€ç§ï¼šå½“è¡¨è¾¾å¼å…¨ä¸ºçœŸçš„æ—¶å€™ã€‚è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚
ç¬¬äºŒç§ï¼šå½“è¡¨è¾¾å¼ä¸­ï¼Œæœ‰ä¸€ä¸ªä¸ºå‡çš„æ—¶å€™ã€‚è¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„è¡¨è¾¾å¼çš„å€¼
*/
var a = "abc";
var b = true;
var d = false;
var c = null;
alert(a && b); // true
alert(b && a); // true
alert(a && d); // false
alert(a && c); // null

/*
|| æˆ–è¿ç®—
ç¬¬ä¸€ç§æƒ…å†µï¼šå½“è¡¨è¾¾å¼å…¨ä¸ºå‡æ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼
ç¬¬äºŒç§æƒ…å†µï¼šåªè¦æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸ºçœŸã€‚å°±ä¼šè¿”å›ç¬¬ä¸€ä¸ªä¸ºçœŸçš„è¡¨è¾¾å¼çš„å€¼
*/
alert(d || c); // null
alert(c || d); // false
alert(a || c); // abc
alert(b || c); // true
```

### æ•°ç»„ï¼ˆé‡ç‚¹ï¼‰

JavaScript ä¸­çš„æ•°ç»„ï¼š

``` javascript
var æ•°ç»„å = []; // ç©ºæ•°ç»„
var æ•°ç»„å = [1, 'abc', true] // å®šä¹‰æ•°ç»„åŒæ—¶èµ‹å€¼å…ƒç´ 

// JavaScript è¯­è¨€ä¸­çš„æ•°ç»„ï¼Œåªè¦æˆ‘ä»¬é€šè¿‡æ•°ç»„ä¸‹æ ‡èµ‹å€¼ï¼Œé‚£ä¹ˆæœ€å¤§çš„ä¸‹æ ‡å€¼ï¼Œå°±ä¼šè‡ªåŠ¨çš„ç»™æ•°ç»„åšæ‰©å®¹æ“ä½œã€‚
var arr = []; // å®šä¹‰ä¸€ä¸ªç©ºæ•°ç»„
alert(arr.length); // 0

arr[0] = 12;
alert(arr[0]); // 12
alert(arr.length); // 1

arr[2] = "abc";
alert(arr.length); // 3
alert(arr[1]); // undefined

// æ•°ç»„çš„éå†
for (var i = 0; i < arr.length; i++) {
  alert(arr[i]);
}
```

### å‡½æ•°ï¼ˆé‡ç‚¹ï¼‰

#### å‡½æ•°çš„ä¸¤ç§å®šä¹‰æ–¹å¼

ä¸¤ç§å®šä¹‰æ–¹å¼ï¼š

1. ä½¿ç”¨ function å…³é”®å­—å®šä¹‰å‡½æ•°

   function å‡½æ•°å(å½¢å‚) {
   â€‹	å‡½æ•°ä½“
   }
   
   ``` javascript
   function fun() {
     alert("æ— å‚å‡½æ•° fun()è¢«è°ƒç”¨äº†");
   }
   fun();
   
   function fun2(a, b) {
     alert("æœ‰å‚å‡½æ•° fun2() è¢«è°ƒç”¨äº† a => " + a + ", b => "+b);
   }
   fun2(12, "abc");
   
   
   // å®šä¹‰å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°
   function sum(num1, num2) {
     var result = num1 + num2;
     return result;
   }
   alert(sum(100, 50));
   ```
   
2. æ ¼å¼ï¼š

   var å‡½æ•°å = function (å½¢å‚åˆ—è¡¨) {å‡½æ•°ä½“}

   ``` javascript
   var fun = function () {
     alert("æ— å‚å‡½æ•°");
   }
   fun();
   
   var fun2 = function (a, b) {
     alert("æœ‰å‚å‡½æ•° a = " + a + ", b = " + b);
   }
   fun2(1, 2);
   
   var fun3 = function (num1, num2) {
     return num1 + num2;
   }
   alert(fun3(100, 200));
   ```



**<span style="color: red">æ³¨æ„ï¼š</span>**JavaScript ä¸­å‡½æ•°çš„é‡è½½ä¼šç›´æ¥è¦†ç›–æ‰ä¸Šä¸€æ¬¡çš„å®šä¹‰

``` javascript
// JS ä¸å…è®¸å‡½æ•°é‡è½½
function fun(a, b) {
  alert("æœ‰å‚å‡½æ•°fun(a, b)");
}

function fun() {
  alert("æ— å‚å‡½æ•°fun()");
}

fun(1, "ad"); // æ— å‚å‡½æ•°fun()
```

#### å‡½æ•°çš„ arguments éšå½¢å‚æ•°ï¼ˆåªåœ¨ function å‡½æ•°å†…ï¼‰

éšå½¢å‚æ•°å°±æ˜¯åœ¨ function å‡½æ•°ä¸­ä¸éœ€è¦å®šä¹‰ï¼Œä½†å´å¯ä»¥ç›´æ¥ç”¨æ¥è·å–æ‰€æœ‰å‚æ•°çš„å˜é‡ã€‚

ï¼ˆåƒ Java åŸºç¡€çš„å¯å˜é•¿å‚æ•°ï¼‰

``` javascript
function fun(a) {
  alert(arguments.length); // å¯çœ‹å‚æ•°ä¸ªæ•°

  alert(arguments[0]);
  alert(arguments[1]);
  alert(arguments[2]);
  for (var i = 0; i < arguments.length; i++){
    alert(arguments[i]);
  }
  
  alert("a = " + a);
  alert("æ— å‚å‡½æ•°fun()");
}
fun(1, "ad", true);

// è¦æ±‚ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºè®¡ç®—æ‰€æœ‰å‚æ•°ç›¸åŠ çš„å’Œå¹¶è¿”å›
function sum(num1, num2) {
  var result = 0;
  for (var i = 0; i < arguments.length; i++) {
    if (typeof(arguments[i]) == "number") {
      result += arguments[i];
    }
  }
  return result;
}

alert(sum(1, 2, 3, 4, "abc", 5, 6, 7, 8, 9));
```

### è‡ªå®šä¹‰å¯¹è±¡

#### Object å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡

``` javascript
// å¯¹è±¡çš„å®šä¹‰
var å˜é‡å = new Object(); // å¯¹è±¡å®ä¾‹ï¼ˆç©ºå¯¹è±¡ï¼‰
å˜é‡å.å±æ€§å€¼ = å€¼; // å®šä¹‰ä¸€ä¸ªå±æ€§
å˜é‡å.å‡½æ•°å = function() {} // å®šä¹‰ä¸€ä¸ªå‡½æ•°

var obj = new Object();
obj.name = "åä»”";
obj.age = 18;
obj.fun = function () {
  alert("å§“åï¼š" + this.name + "ï¼Œå¹´é¾„ï¼š" + this.age);
}

// å¯¹è±¡çš„è®¿é—®ï¼š
å˜é‡å.å±æ€§ / å‡½æ•°å();

alert(obj.age);
obj.fun();
```

#### {} èŠ±æ‹¬å·å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡

``` javascript
// å¯¹è±¡çš„å®šä¹‰ï¼š
var å˜é‡å = {			// ç©ºå¯¹è±¡
  å±æ€§å: å€¼,			// å®šä¹‰ä¸€ä¸ªå±æ€§
  å±æ€§å: å€¼,			// å®šä¹‰ä¸€ä¸ªå±æ€§
  å‡½æ•°å: function() {}	// å®šä¹‰ä¸€ä¸ªå‡½æ•°
};

var obj = {
  name: "å›½å“¥",
  age: 18,
  fun: function () {
    alert("å§“åï¼š" + this.name + "ï¼Œå¹´é¾„ï¼š" + this.age);
  }
};

// å¯¹è±¡çš„è®¿é—®ï¼š
å˜é‡å.å±æ€§ / å‡½æ•°å();

alert(obj.name);
obj.fun();
```

### äº‹ä»¶

äº‹ä»¶æ˜¯ç”µè„‘è¾“å…¥è®¾å¤‡ä¸é¡µé¢è¿›è¡Œäº¤äº’çš„å“åº”

#### äº‹ä»¶çš„æ³¨å†Œ

äº‹ä»¶æ³¨å†Œï¼ˆäº‹ä»¶ç»‘å®šï¼‰å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨ï¼Œå½“äº‹ä»¶å“åº”åè¦æ‰§è¡Œå“ªäº›æ“ä½œä»£ç 

åˆ†ä¸º**é™æ€æ³¨å†Œ**å’Œ**åŠ¨æ€æ³¨å†Œ**

##### é™æ€æ³¨å†Œäº‹ä»¶

é€šè¿‡ HTML æ ‡ç­¾çš„äº‹ä»¶å±æ€§ç›´æ¥èµ‹äºˆäº‹ä»¶å“åº”åçš„ä»£ç 

##### åŠ¨æ€æ³¨å†Œäº‹ä»¶

å…ˆé€šè¿‡ JS ä»£ç å¾—åˆ°æ ‡ç­¾çš„ DOM å¯¹è±¡ï¼Œç„¶åå†é€šè¿‡ `DOM å¯¹è±¡.äº‹ä»¶å = function() {}` è¿™ç§å½¢å¼èµ‹äºˆäº‹ä»¶å“åº”åçš„ä»£ç 

åŸºæœ¬æ­¥éª¤ï¼š

1. è·å–æ ‡ç­¾å¯¹è±¡
2. æ ‡ç­¾å¯¹è±¡.å¯¹è±¡å = function() {}

#### å¸¸ç”¨çš„äº‹ä»¶

 ##### onload åŠ è½½å®Œæˆäº‹ä»¶

é¡µé¢åŠ è½½å®Œæˆåå¸¸ç”¨äºåšé¡µé¢ JS ä»£ç åˆå§‹åŒ–æ“ä½œ

``` html
<script type="text/javascript">
  // onload äº‹ä»¶é™æ€æ³¨å†Œ
  function onloadFun() {
    alert('é™æ€æ³¨å†Œ onload äº‹ä»¶ï¼Œæ‰€æœ‰ä»£ç ');
  }
</script>

<body onload="onloadFun()">
</body>
```

``` html
<script type="text/javascript">
  // onload äº‹ä»¶åŠ¨æ€æ³¨å†Œï¼Œæ˜¯å›ºå®šå†™æ³•
  window.onload = function () {
    alert("åŠ¨æ€æ³¨å†Œçš„ onload äº‹ä»¶");
  }
</script>
```

#####  onclick ç‚¹å‡»äº‹ä»¶

å¸¸ç”¨äºæŒ‰é’®çš„ç‚¹å‡»å“åº”æ“ä½œ

``` html
<script type="text/javascript">
  function onclickFun() {
    alert("é™æ€æ³¨å†Œ onclick äº‹ä»¶");
  }
</script>

<body>
  <!--é™æ€æ³¨å†Œ onClick äº‹ä»¶-->
  <button onclick="onclickFun();">æŒ‰é’®</button>
</body>
```

``` html
<script type="text/javascript">
  // åŠ¨æ€æ³¨å†Œ onclick äº‹ä»¶
  window.onload = function () {
    // 1. è·å–æ ‡ç­¾å¯¹è±¡
    /*
     * document æ˜¯ JavaScript è¯­è¨€æä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆæ–‡æ¡£ï¼‰
     * get           è·å–
     * Element       å…ƒç´ ï¼ˆå°±æ˜¯æ ‡ç­¾ï¼‰
     * By            é€šè¿‡.... / ç”±... / ç»...
     * Id            id å±æ€§
     *
     * getElementById é€šè¿‡ id å±æ€§è·å–æ ‡ç­¾å¯¹è±¡
     **/
    var btnObj = document.getElementById("btn");
    // alert(btnObj);
    
    // 2. æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å = function(){}
    btnObj.onclick = function () {
      alert("åŠ¨æ€æ³¨å†Œçš„ onclick äº‹ä»¶");
    }
  }
</script>

<body>
  <!--åŠ¨æ€æ³¨å†Œ onclick äº‹ä»¶-->
  <button id="btn">æŒ‰é’®</button>
</body>
```

##### onblur å¤±å»ç„¦ç‚¹äº‹ä»¶

å¸¸ç”¨äºè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹åéªŒè¯å…¶è¾“å…¥å†…å®¹æ˜¯å¦åˆæ³•

``` html
<script type="text/javascript">
  // é™æ€æ³¨å†Œå¤±å»ç„¦ç‚¹äº‹ä»¶
  function onblurFun() {
    // console æ˜¯æ§åˆ¶å°å¯¹è±¡ï¼Œæ˜¯ç”± JavaScript è¯­è¨€æä¾›ï¼Œä¸“é—¨ç”¨æ¥å‘æµè§ˆå™¨çš„æ§åˆ¶å™¨æ‰“å°è¾“å‡ºï¼Œç”¨äºæµ‹è¯•ä½¿ç”¨
    // log() æ˜¯æ‰“å°çš„æ–¹æ³•
    console.log("é™æ€æ³¨å†Œå¤±å»ç„¦ç‚¹äº‹ä»¶");
  }
</script>

<body>
    ç”¨æˆ·å: <input type="text" onblur="onblurFun();"><br/>
    å¯†ç : <input id="password" type="text" ><br/>
</body>
```

``` html
<script type="text/javascript">
  // åŠ¨æ€æ³¨å†Œ onblur äº‹ä»¶
  window.onload = function () {
    // 1. è·å–æ ‡ç­¾å¯¹è±¡
    var passwordObj = document.getElementById("password");
    // alert(passwordObj);
    // 2. æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å = function(){};
    passwordObj.onblur = function () {
      console.log("åŠ¨æ€æ³¨å†Œå¤±å»ç„¦ç‚¹äº‹ä»¶");
    }
  }
</script>
```

#####  onchange å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶

å¸¸ç”¨äºä¸‹æ‹‰åˆ—è¡¨å’Œè¾“å…¥æ¡†å†…å®¹å‘ç”Ÿæ”¹å˜åæ“ä½œ

``` html
<script type="text/javascript">
  function onchangeFun() {
    alert("å¥³ç¥å·²ç»æ”¹å˜äº†");
  }
</script>

<body>
  è¯·é€‰æ‹©ä½ å¿ƒä¸­çš„å¥³ç¥ï¼š
  <!--é™æ€æ³¨å†Œonchangeäº‹ä»¶-->
  <select onchange="onchangeFun();">
    <option>--å¥³ç¥--</option>
    <option>èŠ³èŠ³</option>
    <option>ä½³ä½³</option>
    <option>å¨˜å¨˜</option>
  </select>
</body>
```

``` html
<script>
  window.onload = function () {
    // 1. è·å–æ ‡ç­¾å¯¹è±¡
    var selObj = document.getElementById("sel");
    // alert( selObj );
    // 2. æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å = function(){}
    selObj.onchange = function () {
      alert("ç”·ç¥å·²ç»æ”¹å˜äº†");
    }
  }
</script>

<body>
  è¯·é€‰æ‹©ä½ å¿ƒä¸­çš„ç”·ç¥ï¼š
  <select id="sel">
    <option>--ç”·ç¥--</option>
    <option>å›½å“¥</option>
    <option>åä»”</option>
    <option>å¯ŒåŸ</option>
  </select>
</body>
```

#####  onsubmit è¡¨å•æäº¤äº‹ä»¶

å¸¸ç”¨äºè¡¨å•æäº¤å‰ï¼ŒéªŒè¯æ‰€æœ‰è¡¨å•é¡¹æ˜¯å¦åˆæ³•

``` html
<script type="text/javascript" >
  // é™æ€æ³¨å†Œè¡¨å•æäº¤äº‹ä»¶
  function onsubmitFun(){
    // è¦éªŒè¯æ‰€æœ‰è¡¨å•é¡¹æ˜¯å¦åˆæ³•ï¼Œå¦‚æœï¼Œæœ‰ä¸€ä¸ªä¸åˆæ³•å°±é˜»æ­¢è¡¨å•æäº¤
    alert("é™æ€æ³¨å†Œè¡¨å•æäº¤äº‹ä»¶----å‘ç°ä¸åˆæ³•");
    return flase;
  }
</script>

<body>
  <!-- onsubmit="return false" å¯ä»¥é˜»æ­¢è¡¨å•æäº¤ -->
  <form action="http://localhost" method="get" onsubmit="return onsubmitFun();">
    <input type="submit" value="é™æ€æ³¨å†Œ"/>
  </form>
</body>
```

``` html
<script type="text/javascript" >
  window.onload = function () {
    // 1. è·å–æ ‡ç­¾å¯¹è±¡
    var formObj = document.getElementById("form");
    // 2. æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å = function() {}
    formObj.onsubmit = function () {
      // è¦éªŒè¯æ‰€æœ‰è¡¨å•é¡¹æ˜¯å¦åˆæ³•ï¼Œå¦‚æœï¼Œæœ‰ä¸€ä¸ªä¸åˆæ³•å°±é˜»æ­¢è¡¨å•æäº¤
      alert("åŠ¨æ€æ³¨å†Œè¡¨å•æäº¤äº‹ä»¶----å‘ç°ä¸åˆæ³•");
      return false;
    }
  }
</script>

<body>
  <form action="http://localhost" id="form">
    <input type="submit" value="åŠ¨æ€æ³¨å†Œ"/>
  </form>
</body>
```

### DOM

DOM å…¨ç¨‹æ˜¯ Document Object Model æ–‡æ¡£å¯¹è±¡æ¨¡å‹

> æŠŠæ–‡æ¡£ä¸­çš„æ ‡ç­¾ã€å±æ€§ã€æ–‡æœ¬ï¼Œè½¬æ¢æˆå¯¹è±¡æ¥ç®¡ç†

#### document å¯¹è±¡

* document ç®¡ç†äº†æ‰€æœ‰çš„ HTML æ–‡æ¡£å†…å®¹
* document æ˜¯ä¸€ç§æ ‘ç»“æ„çš„æ–‡æ¡£ï¼Œæœ‰å±‚çº§å…³ç³»
* document æŠŠæ‰€æœ‰çš„æ ‡ç­¾éƒ½å¯¹è±¡åŒ–
* å¯ä»¥é€šè¿‡ document è®¿é—®æ‰€æœ‰çš„æ ‡ç­¾å¯¹è±¡

#### document å¯¹è±¡çš„æ–¹æ³•

document å¯¹è±¡çš„ä¸‰ä¸ªæŸ¥è¯¢æ–¹æ³•ï¼Œå¦‚æœæœ‰ id å±æ€§ï¼Œä¼˜å…ˆä½¿ç”¨ **[getElementById](# getElementById(elementId))** æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰ id å±æ€§ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ **[getElementsByName](# getElementsByName(elementName))** æ–¹æ³•æŸ¥è¯¢ï¼Œå¦‚æœæ—¢æ²¡æœ‰ id å±æ€§ä¹Ÿæ²¡æœ‰ name å±æ€§å°±æŒ‰æ ‡ç­¾åæŸ¥è¯¢ **[getElementsByTagName](# getElementsByTagName(tagName))**

ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•ï¼Œä¸€å®šè¦åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åæ‰§è¡Œï¼Œæ‰èƒ½æŸ¥è¯¢åˆ°æ ‡ç­¾å¯¹è±¡

##### getElementById(elementId)

é€šè¿‡æ ‡ç­¾çš„ id å±æ€§æŸ¥æ‰¾æ ‡ç­¾ dom å¯¹è±¡ï¼ŒelementId æ˜¯æ ‡ç­¾çš„ id å±æ€§å€¼

``` html
<script type="text/javascript" >
  /*
   * å½“ç”¨æˆ·ç‚¹å‡»äº†æ ¡éªŒæŒ‰é’®ï¼Œè¦è·å–è¾“å‡ºæ¡†ä¸­çš„å†…å®¹ã€‚ç„¶åéªŒè¯å…¶æ˜¯å¦åˆæ³•
   * éªŒè¯çš„è§„åˆ™æ˜¯ï¼šå¿…é¡»ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç»„æˆã€‚å¹¶ä¸”é•¿åº¦æ˜¯ 5 åˆ° 12 ä½
   **/
  function onclickFun() {
    // 1. å½“æˆ‘ä»¬è¦æ“ä½œä¸€ä¸ªæ ‡ç­¾çš„æ—¶å€™ï¼Œä¸€å®šè¦å…ˆè·å–è¿™ä¸ªæ ‡ç­¾å¯¹è±¡ã€‚
    var usernameObj = document.getElementById("username");
    // [object HTMLInputElement] å®ƒå°±æ˜¯ dom å¯¹è±¡
    var usernameText = usernameObj.value;
    // å¦‚ä½•éªŒè¯å­—ç¬¦ä¸²ï¼Œç¬¦åˆæŸä¸ªè§„åˆ™ï¼Œéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼
    var patt = /^\w{5,12}$/;
    /*
     * test()æ–¹æ³•ç”¨äºæµ‹è¯•æŸä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸æ˜¯åŒ¹é…æˆ‘çš„è§„åˆ™ï¼Œ
     * åŒ¹é…å°±è¿”å›trueã€‚ä¸åŒ¹é…å°±è¿”å›false.
     **/

    var usernameSpanObj = document.getElementById("usernameSpan");
    // innerHTML è¡¨ç¤ºèµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹
    // innerHTML è¿™ä¸ªå±æ€§å¯è¯»ï¼Œå¯å†™
    usernameSpanObj.innerHTML = "å›½å“¥çœŸå¯çˆ±ï¼";

    if (patt.test(usernameText)) {
      // alert("ç”¨æˆ·ååˆæ³•ï¼");
      usernameSpanObj.innerHTML = "ç”¨æˆ·ååˆæ³•ï¼";
      // usernameSpanObj.innerHTML = "<img src=\"right.png\" width=\"18\" height=\"18\">";
    } else {
      // alert("ç”¨æˆ·åä¸åˆæ³•ï¼");
      usernameSpanObj.innerHTML = "ç”¨æˆ·åä¸åˆæ³•ï¼";
      // usernameSpanObj.innerHTML = "<img src=\"wrong.png\" width=\"18\" height=\"18\">";
    }
  }
</script>

<body>
  ç”¨æˆ·åï¼š<input type="text" id="username" value="wzg"/>
  <span id="usernameSpan" style="color:red;"></span><br/>
  <button onclick="onclickFun()">æ ¡éªŒ</button>
</body>
```

##### getElementsByName(elementName)

é€šè¿‡æ ‡ç­¾çš„ name å±æ€§æŸ¥æ‰¾æ ‡ç­¾ dom å¯¹è±¡ï¼ŒelementName æ˜¯æ ‡ç­¾çš„ name å±æ€§å€¼ï¼Œä¼šè¿”å›å¤šä¸ªå€¼

``` html
<script type="text/javascript">
  // å…¨é€‰
  function checkAll() {
    // è®©æ‰€æœ‰å¤é€‰æ¡†éƒ½é€‰ä¸­
    // document.getElementsByName();æ ¹æ®æŒ‡å®šçš„ name å±æ€§æŸ¥è¯¢è¿”å›å¤šä¸ªæ ‡ç­¾å¯¹è±¡é›†åˆ
    // è¿™ä¸ªé›†åˆçš„æ“ä½œè·Ÿæ•°ç»„ä¸€æ ·
    // é›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ dom å¯¹è±¡
    // è¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ é¡ºåºæ˜¯ä»–ä»¬åœ¨ html é¡µé¢ä¸­ä»ä¸Šåˆ°ä¸‹çš„é¡ºåº
    var hobbies = document.getElementsByName("hobby");
    // checked è¡¨ç¤ºå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€‚å¦‚æœé€‰ä¸­æ˜¯trueï¼Œä¸é€‰ä¸­æ˜¯false
    // checked è¿™ä¸ªå±æ€§å¯è¯»ï¼Œå¯å†™
    for (var i = 0; i < hobbies.length; i++){
      hobbies[i].checked = true;
    }
  }
  
  //å…¨ä¸é€‰
  function checkNo() {
    var hobbies = document.getElementsByName("hobby");
    // checked è¡¨ç¤ºå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€‚å¦‚æœé€‰ä¸­æ˜¯trueï¼Œä¸é€‰ä¸­æ˜¯false
    // checked è¿™ä¸ªå±æ€§å¯è¯»ï¼Œå¯å†™
    for (var i = 0; i < hobbies.length; i++){
      hobbies[i].checked = false;
    }
  }
  // åé€‰
  function checkReverse() {
    var hobbies = document.getElementsByName("hobby");
    for (var i = 0; i < hobbies.length; i++) {
      hobbies[i].checked = !hobbies[i].checked;
      // if (hobbies[i].checked) {
      //     hobbies[i].checked = false;
      // }else {
      //     hobbies[i].checked = true;
      // }
    }
  }
</script>

<body>
    å…´è¶£çˆ±å¥½ï¼š
    <input type="checkbox" name="hobby" value="cpp" checked="checked">C++
    <input type="checkbox" name="hobby" value="java">Java
    <input type="checkbox" name="hobby" value="js">JavaScript
    <br/>
    <button onclick="checkAll()">å…¨é€‰</button>
    <button onclick="checkNo()">å…¨ä¸é€‰</button>
    <button onclick="checkReverse()">åé€‰</button>
</body>
```

##### getElementsByTagName(tagName)

é€šè¿‡æ ‡ç­¾åæŸ¥æ‰¾æ ‡ç­¾ dom å¯¹è±¡ï¼ŒtagName æ˜¯æ ‡ç­¾å

``` html
<script type="text/javascript">
  window.onload = function(){
    // alert( document.getElementById("btn01") );
  }

  // å…¨é€‰
  function checkAll() {
    alert( document.getElementById("btn01") );
    // document.getElementsByTagName("input");
    // æ˜¯æŒ‰ç…§æŒ‡å®šæ ‡ç­¾åæ¥è¿›è¡ŒæŸ¥è¯¢å¹¶è¿”å›é›†åˆ
    // è¿™ä¸ªé›†åˆçš„æ“ä½œè·Ÿæ•°ç»„ä¸€æ ·
    // é›†åˆä¸­éƒ½æ˜¯ dom å¯¹è±¡
    // é›†åˆä¸­å…ƒç´ é¡ºåºæ˜¯ä»–ä»¬åœ¨htmlé¡µé¢ä¸­ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºã€‚
    var inputs = document.getElementsByTagName("input");
    for (var i = 0; i < inputs.length; i++){
      inputs[i].checked = true;
    }
  }
</script>

<body>
    å…´è¶£çˆ±å¥½ï¼š
    <input type="checkbox" value="cpp" checked="checked">C++
    <input type="checkbox" value="java">Java
    <input type="checkbox" value="js">JavaScript
    <br/>
    <button id="btn01" onclick="checkAll()">å…¨é€‰</button>

</body>
```

##### createElement(tagName)

é€šè¿‡ç»™å®šçš„æ ‡ç­¾åï¼Œåˆ›å»ºä¸€ä¸ªæ ‡ç­¾å¯¹è±¡ï¼ŒtagName æ˜¯è¦åˆ›å»ºçš„æ ‡ç­¾å

``` html
<script type="text/javascript">
  window.onload = function () {
    // ç°åœ¨éœ€è¦æˆ‘ä»¬ä½¿ç”¨ js ä»£ç æ¥åˆ›å»º html æ ‡ç­¾ï¼Œå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
    // æ ‡ç­¾çš„å†…å®¹å°±æ˜¯ï¼š<div>å›½å“¥ï¼Œæˆ‘çˆ±ä½ </div>
    var divObj = document.createElement("div"); // åœ¨å†…å­˜ä¸­ <div></div>

    var textNodeObj = document.createTextNode("å›½å“¥ï¼Œæˆ‘çˆ±ä½ "); // æœ‰ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹å¯¹è±¡ #å›½å“¥ï¼Œæˆ‘çˆ±ä½ 

    divObj.appendChild(textNodeObj); // <div>å›½å“¥ï¼Œæˆ‘çˆ±ä½ </div>

    // divObj.innerHTML = "å›½å“¥ï¼Œæˆ‘çˆ±ä½ "; // <div>å›½å“¥ï¼Œæˆ‘çˆ±ä½ </div>ï¼Œä½†è¿˜åªæ˜¯åœ¨å†…å­˜ä¸­
    // æ·»åŠ å­å…ƒç´ 
    document.body.appendChild(divObj);
  }
</script>
```



#### èŠ‚ç‚¹çš„å¸¸ç”¨æ–¹æ³•å’Œå±æ€§

##### æ–¹æ³•

é€šè¿‡å…·ä½“çš„å…ƒç´ èŠ‚ç‚¹è°ƒç”¨ getElementsByTagName() æ–¹æ³•è·å–å½“å‰èŠ‚ç‚¹çš„æŒ‡å®šæ ‡ç­¾åå­©å­èŠ‚ç‚¹

é€šè¿‡å…·ä½“çš„å…ƒç´ èŠ‚ç‚¹è°ƒç”¨ appendChild(oChildNode) æ–¹æ³•æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹

##### å±æ€§

childNodesï¼šè·å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹

firstChildï¼šè·å–å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹

lastChildï¼šè·å–å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹

parentNodeï¼šè·å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹

nextSiblingï¼šè·å–å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹

previousSiblingï¼šè·å–å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹

classNameï¼šè·å–ã€è®¾ç½®æ ‡ç­¾çš„ class å±æ€§å€¼

innerHTMLï¼šè·å–ã€è®¾ç½®èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹

innerTextï¼šè·å–ã€è®¾ç½®èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬

## jQuery

### jQuery æ ¸å¿ƒå‡½æ•°

`$` æ˜¯ jQuery çš„æ ¸å¿ƒå‡½æ•°ï¼Œèƒ½å®Œæˆ jQueryçš„å¾ˆå¤šåŠŸèƒ½ã€‚`$()` å°±æ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°

1. ä¼ å…¥å‚æ•°ä¸º**å‡½æ•°**æ—¶ï¼šè¡¨ç¤ºé¡µé¢åŠ è½½å®Œæˆä¹‹åã€‚ç›¸å½“äº `window.onload = function() {}`

   ``` javascript
   $(function() {
     alert("é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è°ƒç”¨")
   });
   ```

2. ä¼ å…¥å‚æ•°ä¸º**HTML å­—ç¬¦ä¸²**æ—¶ï¼šä¼šæ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²åˆ›å»ºå…ƒç´ èŠ‚ç‚¹å¯¹è±¡

   ``` javascript
   $("    <div>" +
     "        <span>div-span1</span>" +
     "        <span>div-span2</span>" +
     "    </div>").appendTo("body");
   ```

3. ä¼ å…¥å‚æ•°ä¸º**é€‰æ‹©å™¨å­—ç¬¦ä¸²**æ—¶ï¼š

   ``` html
   <script type="text/javascript">
   // $("#id å±æ€§å€¼"); id é€‰æ‹©å™¨ï¼Œæ ¹æ® id æŸ¥è¯¢æ ‡ç­¾å¯¹è±¡
   // $("æ ‡ç­¾å"); æ ‡ç­¾åé€‰æ‹©å™¨ï¼Œæ ¹æ®æŒ‡å®šçš„æ ‡ç­¾åæŸ¥è¯¢æ ‡ç­¾å¯¹è±¡
   // $(".class å±æ€§å€¼"); ç±»å‹é€‰æ‹©å™¨ï¼Œå¯ä»¥æ ¹æ® class å±æ€§æŸ¥è¯¢æ ‡ç­¾å¯¹è±¡
   
   alert($("#btn").length) // id é€‰æ‹©å™¨
   alert($("button").length); // æ ‡ç­¾åé€‰æ‹©å™¨
   alert($(".buttonClass").length) // ç±»å‹é€‰æ‹©å™¨
   </script>
   
   <body>
     <button id="btn" class="buttonClass">æŒ‰é’®</button>
   </body>
   ```

4. ä¼ å…¥å‚æ•°ä¸º**DOMå¯¹è±¡**æ—¶ï¼šä¼šæŠŠè¿™ä¸ª DOM å¯¹è±¡è½¬æ¢ä¸º jQuery å¯¹è±¡

### DOM å¯¹è±¡å’Œ jQuery å¯¹è±¡äº’è½¬

jQuery å¯¹è±¡çš„æœ¬è´¨å°±æ˜¯ï¼šDOM å¯¹è±¡çš„æ•°ç»„ + jQuery æä¾›çš„ä¸€ç³»åˆ—åŠŸèƒ½å‡½æ•°

#### DOM -> jQuery

`$(DOM å¯¹è±¡)`ï¼ŒğŸ¥³

#### jQuery -> DOM

`jQuery å¯¹è±¡[ä¸‹æ ‡]`ï¼ŒğŸ¥³

### jQuery é€‰æ‹©å™¨ï¼ˆé‡ç‚¹ï¼‰

#### åŸºæœ¬é€‰æ‹©å™¨

* `#id`ï¼šæ ¹æ® id æŸ¥æ‰¾æ ‡ç­¾å¯¹è±¡

* `element`ï¼šæ ¹æ®æ ‡ç­¾åæŸ¥æ‰¾æ ‡ç­¾å¯¹è±¡

* `.class`ï¼šæ ¹æ® class æŸ¥æ‰¾æ ‡ç­¾å¯¹è±¡

* `*`ï¼šè¡¨ç¤ºä»»æ„çš„ï¼Œæ‰€æœ‰çš„å…ƒç´ 

* `selector1, selector2, selectorN`ï¼šç»„åˆå¤šä¸ªé€‰æ‹©å™¨çš„ç»“æœå¹¶è¿”å›

  ``` html
  <div>div</div>
  <p class="myClass">p class="myClass"</p>
  <span>span</span>
  <p class="notMyClass">p class="notMyClass"</p>
  ```

  jQuery ä»£ç ï¼š

  ``` javascript
  $("div, span, p.myClass")
  
  // ç»“æœ:
  // [ <div>div</div>, <p class="myClass">p class="myClass"</p>, <span>span</span>]
  ```

  å…¶ä¸­ `p.myClass` è¡¨ç¤ºæ ‡ç­¾åæ˜¯ `p` å¹¶ä¸” class ä¸º `myClass` çš„å¯¹è±¡

#### å±‚çº§é€‰æ‹©å™¨

* `ancestor descendan`tï¼šåä»£é€‰æ‹©å™¨ï¼Œåœ¨ç»™å®šçš„ç¥–å…ˆå…ƒç´ ä¸‹åŒ¹é…æ‰€æœ‰çš„åä»£å…ƒç´ 
* `parent > child`ï¼šå­å…ƒç´ é€‰æ‹©å™¨ï¼Œåœ¨ç»™å®šçš„çˆ¶å…ƒç´ ä¸‹åŒ¹é…æ‰€æœ‰çš„å­å…ƒç´ 
* `prev + next`ï¼šç›¸é‚»å…ƒç´ é€‰æ‹©å™¨ï¼ŒåŒ¹é…æ‰€æœ‰ç´§æ¥åœ¨ prev å…ƒç´ åçš„ next å…ƒç´ 
* `prev ~ siblings`ï¼šä¹‹åçš„å…„å¼Ÿå…ƒç´ é€‰æ‹©å™¨ï¼ŒåŒ¹é… prev å…ƒç´ ä¹‹åæ‰€æœ‰çš„ siblings å…ƒç´ 

#### è¿‡æ»¤é€‰æ‹©å™¨

* <span style="color: red">**`:first`**</span>ï¼šè·å–ç¬¬ä¸€ä¸ªå…ƒç´ 
* <span style="color: red">**`:last`**</span>ï¼šè·å–æœ€åä¸€ä¸ªå…ƒç´ 
* `:not(selector)`ï¼šå»é™¤æ‰€æœ‰ä¸ç»™å®šé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ 
* `:even`ï¼šåŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼ä¸ºå¶æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•°
* `:odd`ï¼šåŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼ä¸ºå¥‡æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•°
* <span style="color: red">**`:eq(index)`**</span>ï¼šåŒ¹é…ä¸€ä¸ªç»™å®šç´¢å¼•å€¼çš„å…ƒç´ 
* `:gt(index)`ï¼šåŒ¹é…æ‰€æœ‰å¤§äºç»™å®šç´¢å¼•å€¼çš„å…ƒç´ 
* `:lt(index)`ï¼šåŒ¹é…æ‰€æœ‰å°äºç»™å®šç´¢å¼•å€¼çš„å…ƒç´ 
* `:header`ï¼šåŒ¹é…å¦‚ h1, h2, h3 ä¹‹ç±»çš„æ ‡é¢˜å…ƒç´ 
* `:animated`ï¼šåŒ¹é…æ‰€æœ‰æ­£åœ¨æ‰§è¡ŒåŠ¨ç”»æ•ˆæœçš„å…ƒç´ 
* `:focus`

#### å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨

* `:contains(text)`ï¼šåŒ¹é…åŒ…å«ç»™å®šæ–‡æœ¬çš„å…ƒç´ 
* `:empty`ï¼šåŒ¹é…æ‰€æœ‰ä¸åŒ…å«å­å…ƒç´ æˆ–è€…æ–‡æœ¬çš„ç©ºå…ƒç´ 
* `:parent`ï¼šåŒ¹é…åŒ…å«å­å…ƒç´ æˆ–è€…æ–‡æœ¬çš„å…ƒç´ 
* `:has(selector)`ï¼šåŒ¹é…å«æœ‰é€‰æ‹©å™¨æ‰€åŒ¹é…çš„å…ƒç´ çš„å…ƒç´ 

#### å±æ€§è¿‡æ»¤é€‰æ‹©å™¨

* <span style="color: red">**`[attribute]`**</span>ï¼šåŒ¹é…åŒ…å«ç»™å®šå±æ€§çš„å…ƒç´ 
* <span style="color: red">**`[attribute=value]`**</span>ï¼šåŒ¹é…ç»™å®šçš„å±æ€§æ˜¯æŸä¸ªç‰¹å®šå€¼çš„å…ƒç´ 
* `[attribute!=value]`ï¼šåŒ¹é…æ‰€æœ‰ä¸å«æœ‰æŒ‡å®šçš„å±æ€§ï¼Œæˆ–è€…å±æ€§ä¸ç­‰äºç‰¹å®šå€¼çš„å…ƒç´ 
* `[attribute^=value]`ï¼šåŒ¹é…ç»™å®šçš„å±æ€§æ˜¯ä»¥æŸäº›å€¼å¼€å§‹çš„å…ƒç´ 
* `[attribute$=value]`ï¼šåŒ¹é…ç»™å®šçš„å±æ€§æ˜¯ä»¥æŸäº›å€¼ç»“å°¾çš„å…ƒç´ 
* `[attribute*=value]`ï¼šåŒ¹é…ç»™å®šçš„å±æ€§æ˜¯ä»¥åŒ…å«æŸäº›å€¼çš„å…ƒç´ 
* `[attrSel1][attrSel2][attrSelN]`ï¼šå¤åˆå±æ€§é€‰æ‹©å™¨ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶æ—¶ä½¿ç”¨

### jQuery å…ƒç´ ç­›é€‰

* `eq()`ï¼šè·å–ç»™å®šç´¢å¼•çš„å…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `:eq()` ä¸€æ ·ï¼‰
* `first()`ï¼šè·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `:first` ä¸€æ ·ï¼‰
* `last()`ï¼šè·å–æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `:last` ä¸€æ ·ï¼‰
* `filter(exp)`ï¼šç•™ä¸‹åŒ¹é…çš„å…ƒç´ 
* `is()`ï¼šåˆ¤æ–­æ˜¯å¦åŒ¹é…ç»™å®šçš„é€‰æ‹©å™¨ï¼Œåªè¦æœ‰ä¸€ä¸ªåŒ¹é…å°±è¿”å› true
* `has(exp)`ï¼šè¿”å›åŒ…å«æœ‰åŒ¹é…é€‰æ‹©å™¨çš„å…ƒç´ çš„å…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `:has` ä¸€æ ·ï¼‰
* `not(exp)`ï¼šåˆ é™¤åŒ¹é…é€‰æ‹©å™¨çš„å…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `:not` ä¸€æ ·ï¼‰
* `children(exp)`ï¼šè¿”å›åŒ¹é…ç»™å®šé€‰æ‹©å™¨çš„å­å…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `parent > child` ä¸€æ ·ï¼‰
* `find(exp)`ï¼šè¿”å›åŒ¹é…ç»™å®šé€‰æ‹©å™¨çš„åä»£å…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `ancestor descendant` ä¸€æ ·ï¼‰
* `next()`ï¼šè¿”å›å½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `prev + next` ä¸€æ ·ï¼‰
* `nextAll()`ï¼šè¿”å›å½“å‰å…ƒç´ åé¢æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ ï¼ˆåŠŸèƒ½å’Œ `prev ~ siblings` ä¸€æ ·ï¼‰
* `nextUntil()`ï¼šè¿”å›å½“å‰å…ƒç´ åˆ°æŒ‡å®šåŒ¹é…çš„å…ƒç´ ä¸ºæ­¢çš„åé¢å…ƒç´ 
* `parent()`ï¼šè¿”å›çˆ¶å…ƒç´ 
* `prev(exp)`ï¼šè¿”å›å½“å‰å…ƒç´ çš„ä¸Šä¸€ä¸ªå…„å¼Ÿå…ƒç´ 
* `prevAll()`ï¼šè¿”å›å½“å‰å…ƒç´ å‰é¢æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ 
* `prevUnit(exp)`ï¼šè¿”å›å½“å‰å…ƒç´ åˆ°æŒ‡å®šåŒ¹é…çš„å…ƒç´ ä¸ºæ­¢çš„å‰é¢å…ƒç´ 
* `siblings(exp)`ï¼šè¿”å›æ‰€æœ‰å…„å¼Ÿå…ƒç´ 
* `add()`ï¼šæŠŠ add åŒ¹é…çš„é€‰æ‹©å™¨çš„å…ƒç´ æ·»åŠ åˆ°å½“å‰ jQuery å¯¹è±¡ä¸­

## Servlet

### ä»€ä¹ˆæ˜¯ Servlet

1. Servlet æ˜¯ JavaEE è§„èŒƒä¹‹ä¸€ã€‚
2. Servlet æ˜¯ JavaWeb ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Filter è¿‡æ»¤å™¨ã€Listener ç›‘å¬å™¨
3. Servlet æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ª Java å°ç¨‹åºï¼Œå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯

### æ‰‹åŠ¨å®ç° Servlet ç¨‹åº

1. ç¼–å†™ä¸€ä¸ªç±»å»å®ç° Servlet æ¥å£
2. å®ç° service æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®
3. åˆ° web.xml ä¸­å»é…ç½® Servlet ç¨‹åºçš„è®¿é—®åœ°å€

### Servlet çš„ç”Ÿå‘½å‘¨æœŸ

ç¨‹åºï¼šcn.morooi.servlet.Demo01HelloMyServlet

1. æ‰§è¡Œ Servlet æ„é€ å™¨æ–¹æ³•
2. æ‰§è¡Œ init åˆå§‹åŒ–æ–¹æ³•
3. æ‰§è¡Œ service æ–¹æ³•
4. æ‰§è¡Œ destroy é”€æ¯æ–¹æ³•

>ç¬¬ä¸€ã€äºŒæ­¥ï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»º Servlet ç¨‹åºä¼šè°ƒç”¨
>
>ç¬¬ä¸‰æ­¥ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šè°ƒç”¨
>
>ç¬¬å››æ­¥ï¼Œåœ¨ Web å·¥ç¨‹åœæ­¢çš„æ—¶å€™è°ƒç”¨

### é€šè¿‡ç»§æ‰¿ HttpServlet å®ç° Servlet ç¨‹åº

ç¨‹åºï¼šcn.morooi.servlet.Demo02HelloMyServlet

ä¸€èˆ¬åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œéƒ½æ˜¯ä½¿ç”¨ç»§æ‰¿ HttpServlet ç±»çš„æ–¹å¼å»å®ç° Servlet ç¨‹åº

1. ç¼–å†™ä¸€ä¸ªç±»å»ç»§æ‰¿ HttpServlet ç±»
2. æ ¹æ®ä¸šåŠ¡éœ€è¦é‡å†™ doGet æˆ– doPost æ–¹æ³•
3. åˆ° web.xml ä¸­çš„é…ç½® Servlet ç¨‹åºçš„è®¿é—®åœ°å€

### Servlet ç±»çš„ç»§æ‰¿ä½“ç³»

![](https://s1.ax1x.com/2020/03/18/8B5Vx0.jpg)

### ServletConfig ç±»

Servlet ç¨‹åºçš„é…ç½®ä¿¡æ¯ç±»

> Servlet ç¨‹åºå’Œ ServletConfig å¯¹è±¡éƒ½æ˜¯æœ‰ Tomcat è´Ÿè´£åˆ›å»ºï¼Œæˆ‘ä»¬è´Ÿè´£ä½¿ç”¨
>
> Servlet ç¨‹åºé»˜è®¤æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»ºï¼ŒServletConfig æ˜¯æ¯ä¸ª Servlet ç¨‹åºåˆ›å»ºæ—¶ï¼Œå°±åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ServletConfig å¯¹è±¡

ä½œç”¨ï¼š

* è·å– Servlet ç¨‹åºçš„åˆ«å servlet-name çš„å€¼
* è·å–åˆå§‹åŒ–å‚æ•° init-param
* è·å– ServletContext å¯¹è±¡

**æ³¨æ„**ï¼šé‡å†™ init æ–¹æ³•é‡Œé¢ä¸€å®šè¦è°ƒç”¨çˆ¶ç±»çš„ init(ServletConfig) æ“ä½œ

### ServletContext ç±»

* ServletContext æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä»–è¡¨ç¤º Servlet ä¸Šä¸‹æ–‡å¯¹è±¡
* ä¸€ä¸ª web å·¥ç¨‹åªæœ‰ä¸€ä¸ª ServletContext å¯¹è±¡å®ä¾‹
* ServletContext å¯¹è±¡æ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡
* ServletContext å¯¹è±¡æ˜¯åœ¨ web å·¥ç¨‹éƒ¨ç½²å¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯

> åŸŸå¯¹è±¡ï¼šå¯ä»¥åƒ Map ä¸€æ ·å­˜å–æ•°æ®çš„å¯¹è±¡
>
> è¿™é‡Œçš„åŸŸæŒ‡çš„æ˜¯å­˜å–æ•°æ®çš„æ“ä½œèŒƒå›´ï¼Œæ•´ä¸ª web å·¥ç¨‹
>
> |        |     å­˜æ•°æ®     |     å–æ•°æ®     |     åˆ é™¤æ•°æ®      |
> | ------ | :------------: | :------------: | :---------------: |
> | Map    |     put()      |     get()      |     remove()      |
> | åŸŸå¯¹è±¡ | setAttribute() | getAttribute() | removeAttribute() |

#### ServletContext ç±»çš„å››ä¸ªä½œç”¨

ä»£ç ï¼šcn.morooi.servlet.Demo03ServletContext

1. è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° context-param
2. è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„ï¼Œæ ¼å¼ï¼š`/å·¥ç¨‹è·¯å¾„`
3. è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„
4. åƒ Map ä¸€æ ·å­˜å–æ•°æ®

### è¯·æ±‚çš„ HTTP åè®®æ ¼å¼

å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€æ•°æ®å«è¯·æ±‚ï¼›

æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®å«å“åº”ã€‚

è¯·æ±‚åˆ†ä¸º **GET è¯·æ±‚**å’Œ **POST è¯·æ±‚**

#### GET è¯·æ±‚

1. è¯·æ±‚è¡Œ

   1. è¯·æ±‚çš„æ–¹å¼	(GET)
   2. è¯·æ±‚çš„èµ„æºè·¯å¾„[+?+è¯·æ±‚å‚æ•°]
   3. è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å·ï¼ˆHTTP/1.1ï¼‰

2. è¯·æ±‚å¤´

   key: valueï¼Œä¸åŒé”®å€¼å¯¹è¡¨ç¤ºä¸åŒçš„å«ä¹‰

![](https://i.loli.net/2020/03/18/4Er7AFZIcKBu91g.jpg)

#### POST è¯·æ±‚

1. è¯·æ±‚è¡Œ

   1. è¯·æ±‚çš„æ–¹å¼	(POST)
   2. è¯·æ±‚çš„èµ„æºè·¯å¾„[+?+è¯·æ±‚å‚æ•°]
   3. è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å·ï¼ˆHTTP/1.1ï¼‰

2. è¯·æ±‚å¤´

   1. key: valueï¼Œä¸åŒé”®å€¼å¯¹è¡¨ç¤ºä¸åŒçš„å«ä¹‰

3. è¯·æ±‚ä½“

   å°±æ˜¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®

![](https://i.loli.net/2020/03/18/qkumzFhI4VAjDPM.jpg)

#### å¸¸ç”¨è¯·æ±‚å¤´çš„è¯´æ˜

Acceptï¼šå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„æ•°æ®ç±»å‹

Accpet-Languegeï¼šå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„è¯­è¨€ç±»å‹

User-Agentï¼šå®¢æˆ·ç«¯æµè§ˆå™¨çš„ä¿¡æ¯

Hostï¼šè¯·æ±‚æ—¶çš„æœåŠ¡å™¨ ip å’Œç«¯å£å·

#### å“ªäº›æ˜¯ GETè¯·æ±‚ï¼Œå“ªäº›æ˜¯ POST

GET è¯·æ±‚æœ‰å“ªäº›ï¼š

1. form æ ‡ç­¾ method=get
2. a æ ‡ç­¾
3. link æ ‡ç­¾å¼•å…¥ css
4. Script æ ‡ç­¾å¼•å…¥ js æ–‡ä»¶
5. img æ ‡ç­¾å¼•å…¥å›¾ç‰‡
6. iframe å¼•å…¥ html é¡µé¢
7. åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥åœ°å€åæ•²å›è½¦

POST è¯·æ±‚æœ‰å“ªäº›ï¼š

* form æ ‡ç­¾ method=post

### å“åº”çš„ HTTP åè®®æ ¼å¼

1. å“åº”è¡Œ

   1. å“åº”çš„åè®®å’Œç‰ˆæœ¬å·
   2. å“åº”çŠ¶æ€ç 
   3. å“åº”çŠ¶æ€æè¿°ç¬¦

2. å“åº”å¤´

   key: valueï¼Œä¸åŒçš„å“åº”å¤´ï¼Œæœ‰å…¶ä¸åŒå«ä¹‰

3. å“åº”ä½“ --> å›ä¼ ç»™å®¢æˆ·ç«¯çš„æ•°æ®

![](https://i.loli.net/2020/03/19/NRzb7ySjQqBgWTi.jpg)

### å¸¸è§çš„å“åº”ç 

* 200ï¼šè¯·æ±‚æˆåŠŸ
* 302ï¼šè¯·æ±‚é‡å®šå‘
* 404ï¼šè¯·æ±‚æœåŠ¡å™¨å·²ç»æ”¶åˆ°äº†ï¼Œä½†æ˜¯ä½ è¦çš„æ•°æ®ä¸å­˜åœ¨(è¯·æ±‚åœ°å€é”™è¯¯)
* 500ï¼šæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ (ä»£ç é”™è¯¯)

### MIME ç±»å‹è¯´æ˜

MIME æ˜¯ HTTP åè®®ä¸­æ•°æ®ç±»å‹ã€‚MIME çš„è‹±æ–‡å…¨ç§°æ˜¯ "Multipurpose Internet Mail Extensions" å¤šåŠŸèƒ½ Internet é‚®ä»¶æ‰©å……æœåŠ¡ã€‚

MIME ç±»å‹çš„æ ¼å¼æ˜¯ â€œå¤§ç±»å‹/å°ç±»å‹â€ï¼Œå¹¶ä¸æŸä¸€ç§æ–‡ä»¶çš„æ‰©å±•åç›¸å¯¹åº”ã€‚

å¸¸è§çš„ MIMEç±»å‹ï¼š

| æ–‡ä»¶               | æ‰©å±•å       | MIMEç±»å‹                |
| ------------------ | ------------ | ----------------------- |
| è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ–‡æœ¬ | .html , .htm | text/html               |
| æ™®é€šæ–‡æœ¬           | .txt         | text/plain              |
| RTF æ–‡æœ¬           | .rtf         | application/rtf         |
| GIF å›¾å½¢           | .gif         | image/gif               |
| JPEG å›¾å½¢          | .jpeg, .jpg  | image/jpeg              |
| au å£°éŸ³æ–‡ä»¶        | .au          | audio/basic             |
| MIDI éŸ³ä¹æ–‡ä»¶      | .mid, .midi  | audio/midi,audio/x-midi |
| RealAudio éŸ³ä¹æ–‡ä»¶ | .ra, .ram    | audio/x-pn-realaudio    |
| MPEG æ–‡ä»¶          | .mpg, .mpge  | video/mpeg              |
| AVI æ–‡ä»¶           | .avi         | video/x-msvideo         |
| GZIP æ–‡ä»¶          | .gz          | application/x-gzip      |
| TARæ–‡ä»¶            | .tar         | application/x-tar       |

### HTTPServletRequest ç±»

#### ä½œç”¨

æ¯æ¬¡åªè¦æœ‰è¯·æ±‚è¿›å…¥ Tomcat æœåŠ¡å™¨ï¼ŒTomcat æœåŠ¡å™¨å°±ä¼šæŠŠè¯·æ±‚è¿‡æ¥çš„ HTTP åè®®ä¿¡æ¯è§£æå¥½å°è£…åˆ° Request å¯¹è±¡ä¸­ã€‚ ç„¶åä¼ é€’åˆ° service æ–¹æ³• (doGet å’Œ doPost) ä¸­ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ HttpServletRequest å¯¹è±¡ï¼Œè·å–åˆ°æ‰€æœ‰è¯·æ±‚çš„ä¿¡æ¯ã€‚

#### å¸¸ç”¨æ–¹æ³•

* `getRequestURI()`ï¼šè·å–è¯·æ±‚çš„èµ„æºè·¯å¾„
* `getRequestURL()`ï¼šè·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰
* `getRemoteHost()`ï¼šè·å–å®¢æˆ·ç«¯çš„ ip åœ°å€
* `getHeader()`ï¼šè·å–è¯·æ±‚å¤´
* `getParameter()`ï¼šè·å–è¯·æ±‚çš„å‚æ•°
* `getParameterValues()`ï¼šè·å–è¯·æ±‚çš„å‚æ•°(å¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨)
* `getMethod`ï¼šè·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST
* `setAttribute(key, value)`ï¼šè®¾ç½®åŸŸæ•°æ®
* `getAttribute(key)`ï¼šè·å–åŸŸæ•°æ®
* `getRequestDispatcher()`ï¼šè·å–è¯·æ±‚è½¬å‘å¯¹è±¡
* `setCharacterEncoding(ç¼–ç æ ¼å¼)`ï¼šè®¾ç½® post æ–¹å¼çš„è¯·æ±‚ç¼–ç 

``` java
// ç¨‹åºï¼šcn.morooi.servlet.Demo04HttpServletRequest
public class Demo04HttpServletRequest extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // getRequestURI()ï¼šè·å–è¯·æ±‚çš„èµ„æºè·¯å¾„
        String requestURI = request.getRequestURI();
        System.out.println("requestURI = " + requestURI);
        // getRequestURL()ï¼šè·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰
        StringBuffer requestURL = request.getRequestURL();
        System.out.println("requestURL = " + requestURL);
        // getRemoteHost()ï¼šè·å–å®¢æˆ·ç«¯çš„ ip åœ°å€
        String remoteHost = request.getRemoteHost();
        System.out.println("remoteHost = " + remoteHost);
        // getHeader()ï¼šè·å–è¯·æ±‚å¤´
        String header = request.getHeader("User-Agent");
        System.out.println("header = " + header);
        // getMethodï¼šè·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST
        String method = request.getMethod();
        System.out.println("method = " + method);
    }
}
```

#### è·å–è¯·æ±‚å‚æ•°

``` java
// ç¨‹åºï¼šcn.morooi.servlet.Demo04HttpServletRequest
// è¡¨å•ï¼šform1.html
public class Demo04HttpServletRequest extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // post è¯·æ±‚è¦è®¾ç½®å­—ç¬¦é›†, è¦åœ¨è·å–è¯·æ±‚å‚æ•°ä¹‹å‰æ‰æœ‰æ•ˆ
        request.setCharacterEncoding("utf-8");
        // getParameter()ï¼šè·å–è¯·æ±‚çš„å‚æ•°
        String username = request.getParameter("username");
        System.out.println(username);
        String password = request.getParameter("password");
        System.out.println(password);
        // getParameterValues()ï¼šè·å–è¯·æ±‚çš„å‚æ•°(å¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨)
        String[] hobbies = request.getParameterValues("hobby");
        System.out.println(Arrays.toString(hobbies));
    }
```

#### è¯·æ±‚çš„è½¬å‘

æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä»ä¸€æ¬¡èµ„æºè·³è½¬åˆ°å¦ä¸€ä¸ªèµ„æºçš„æ“ä½œå«è¯·æ±‚è½¬å‘ã€‚

``` java
// ç¨‹åºï¼šcn.morooi.servlet.Demo04HttpServletRequest
//      cn.morooi.servlet.Demo05HttpServletRequest
// è¡¨å•ï¼šform1.html

public class Demo04HttpServletRequest extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // post è¯·æ±‚è¦è®¾ç½®å­—ç¬¦é›†, è¦åœ¨è·å–è¯·æ±‚å‚æ•°ä¹‹å‰æ‰æœ‰æ•ˆ
        request.setCharacterEncoding("utf-8");

        // getParameter()ï¼šè·å–è¯·æ±‚çš„å‚æ•°
        String username = request.getParameter("username");
        System.out.println(username);
        // è¯·æ±‚è½¬å‘
        System.out.println("è½¬å‘å‰: " + username);
        // setAttribute(key, value)ï¼šè®¾ç½®åŸŸæ•°æ®
        request.setAttribute("key", "æŸœå°1çš„ç« ");
        // getRequestDispatcher()ï¼šè·å–è¯·æ±‚è½¬å‘å¯¹è±¡
        request.getRequestDispatcher("/httpServletRequest2").forward(request, response);
    }
}

public class Demo05HttpServletRequest extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        System.out.println("è½¬å‘å: " + username);

        // getAttribute(key)ï¼šè·å–åŸŸæ•°æ®
        Object key = request.getAttribute("key");
        System.out.println("ç« : " + key);

        System.out.println("å¤„ç†è‡ªå·±çš„ä¸šåŠ¡....");
    }
}
```

![](https://i.loli.net/2020/03/19/EZMJzsp76LQk9VB.jpg)

#### base æ ‡ç­¾çš„ä½œç”¨

`<base href="..."/>` æ ‡ç­¾è®¾ç½®é¡µé¢ç›¸å¯¹è·¯å¾„å·¥ä½œæ—¶å‚ç…§çš„åœ°å€

![](https://i.loli.net/2020/03/19/qnECsz21l6jtGSv.jpg)

### HTTPServletResponse ç±»

HttpServletResponse ç±»å’Œ HttpServletRequest ç±»ä¸€æ ·ã€‚æ¯æ¬¡è¯·æ±‚è¿›æ¥ï¼ŒTomcat æœåŠ¡å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Response å¯¹è±¡ä¼ é€’ç»™ Servlet ç¨‹åºå»ä½¿ç”¨ã€‚

> HttpServletRequest è¡¨ç¤ºè¯·æ±‚è¿‡æ¥çš„ä¿¡æ¯ï¼ŒHttpServletResponse è¡¨ç¤ºæ‰€æœ‰å“åº”çš„ä¿¡æ¯ã€‚
>
> å¦‚æœéœ€è¦è®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œéƒ½å¯ä»¥é€šè¿‡ HttpServletResponse å¯¹è±¡æ¥è¿›è¡Œè®¾ç½®

#### ä¸¤ä¸ªè¾“å‡ºæµ

* å­—èŠ‚æµ `getOutputStream();`	å¸¸ç”¨äºä¸‹è½½ï¼ˆä¼ é€’äºŒè¿›åˆ¶æ•°æ®ï¼‰
* å­—ç¬¦æµ `getWriter();`  å¸¸ç”¨äºå›ä¼ å­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨ï¼‰

ä¸¤ä¸ªæµåŒæ—¶åªèƒ½ä½¿ç”¨ä¸€ä¸ªï¼Œä½¿ç”¨äº†å­—èŠ‚æµï¼Œå°±ä¸èƒ½å†ä½¿ç”¨å­—ç¬¦æµï¼Œåä¹‹äº¦ç„¶ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚

#### å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®

``` java
// ç¨‹åºï¼šcn.morooi.servlet.Demo06HttpServletResponse

public class Demo06HttpServletResponse extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // è®¾ç½®æœåŠ¡å™¨å­—ç¬¦é›†ä¸º UTF-8
        response.setCharacterEncoding("UFT-8");
        // é€šè¿‡è®¾ç½®å“åº”å¤´è®¾ç½®æµè§ˆå™¨å­—ç¬¦é›†
        response.setHeader("Content-Type", "text/html; charset=UTF-8");

      	// æ¨èä½¿ç”¨ä»¥ä¸‹æ–¹æ³•
        // setContentType() åŒæ—¶è®¾ç½®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨ UTF-8, è€Œä¸”è®¾ç½®äº†å“åº”å¤´
        // æ­¤æ–¹æ³•ä¸€å®šè¦åœ¨è·å–æµå¯¹è±¡ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ
        response.setContentType("text/html; charset=UTF-8");

        // å‘é€æ•°æ®
        PrintWriter writer = response.getWriter();
        writer.write("è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²");
    }
}
```

#### è¯·æ±‚é‡å®šå‘

æŒ‡å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯è¯´ï¼Œæˆ‘ç»™ä½ ä¸€äº›åœ°å€ï¼Œä½ å»æ–°åœ°å€è®¿é—®ã€‚

![](https://i.loli.net/2020/03/19/ha3Y97WwDexndmM.jpg)

``` java
// ç¨‹åºï¼šcn.morooi.servlet.Demo07Redirect

public class Demo07Redirect extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("é‡å®šå‘å‰....");
        // è®¾ç½®å“åº”çŠ¶æ€ç , 302 é‡å®šå‘
        response.setStatus(302);
        response.setHeader("Location", "form1.html");
        
        // æ¨èä½¿ç”¨ä»¥ä¸‹æ–¹æ³•é‡å®šå‘
        response.sendRedirect("form1.html");
    }
}
```

## JavaEE çš„ä¸‰å±‚æ¶æ„

![](https://i.loli.net/2020/03/19/ujagHD1QM4Xqf5i.jpg)

åˆ†å±‚çš„ç›®çš„æ˜¯ä¸ºäº†è§£è€¦ã€‚è§£è€¦å°±æ˜¯ä¸ºäº†é™ä½ä»£ç çš„è€¦åˆåº¦ã€‚æ–¹ä¾¿é¡¹ç›®åæœŸçš„ç»´æŠ¤å’Œå‡çº§

## JSP

JSP çš„å…¨ç§°æ˜¯ Java Server Pagesï¼ŒJava çš„æœåŠ¡å™¨é¡µé¢

JSP çš„ä¸»è¦ä½œç”¨æ˜¯ä»£æ›¿ Servlet ç¨‹åºå›ä¼  html é¡µé¢çš„æ•°æ®

### JSP çš„æœ¬è´¨

**JSP é¡µé¢æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servlet ç¨‹åº**

å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—® jsp é¡µé¢çš„æ—¶å€™ï¼ŒTomcat æœåŠ¡å™¨ä¼šå¸®æˆ‘ä»¬æŠŠ jsp é¡µé¢ç¿»è¯‘æˆä¸ºä¸€ä¸ª java æºæ–‡ä»¶ï¼Œå¹¶ä¸”å¯¹å®ƒè¿›è¡Œç¼–è¯‘æˆ ä¸º.class å­—èŠ‚ç ç¨‹åºã€‚

### JSP ä¹å¤§å†…ç½®å¯¹è±¡

* requestï¼šè¯·æ±‚å¯¹è±¡
* responseï¼šå“åº”å¯¹è±¡
* pageContextï¼šjsp çš„ä¸Šä¸‹æ–‡å¯¹è±¡
* sessionï¼šä¼šè¯å¯¹è±¡
* applicationï¼šServletContext å¯¹è±¡
* configï¼šServletConfig å¯¹è±¡
* outï¼šjsp è¾“å‡ºæµå¯¹è±¡
* pageï¼šæŒ‡å‘å½“å‰ jsp çš„å¯¹è±¡
* Exceptionï¼šå¼‚å¸¸å¯¹è±¡

### JSP å››å¤§åŸŸå¯¹è±¡

ä½œç”¨èŒƒå›´ä»å°åˆ°å¤§ï¼Œå¯¹è±¡çš„èŒƒå›´è¶Šå¤§ï¼Œé€ æˆçš„æ€§èƒ½æŸè€—è¶Šå¤§ï¼ˆå°½é‡ä½¿ç”¨æœ€å°çš„èŒƒå›´ï¼‰

|           å¯¹è±¡           |                 èŒƒå›´                 |
| :----------------------: | :----------------------------------: |
| pageContext JSP é¡µé¢å®¹å™¨ |      å½“å‰é¡µé¢æœ‰æ•ˆï¼ˆè·³è½¬åæ— æ•ˆï¼‰      |
|     request è¯·æ±‚å¯¹è±¡     |    åŒä¸€æ¬¡è¯·æ±‚æœ‰æ•ˆï¼ˆé‡å®šå‘åæ— æ•ˆï¼‰    |
|     session ä¼šè¯å¯¹è±¡     | åŒä¸€æ¬¡ä¼šè¯æœ‰æ•ˆï¼ˆæ— è®ºæ€ä¹ˆè·³è½¬éƒ½æœ‰æ•ˆï¼‰ |
|   application å…¨å±€å¯¹è±¡   |  å…¨å±€æœ‰æ•ˆï¼ˆæ•´ä¸ªé¡¹ç›®è¿è¡ŒæœŸé—´éƒ½æœ‰æ•ˆï¼‰  |

å…±æœ‰çš„æ–¹æ³•ï¼š

``` java
Object getAttribute(String name) // æ ¹æ®å±æ€§åæˆ–å±æ€§å€¼è·å–
void setAttribute(String name, Object obj) // è®¾ç½®å±æ€§å€¼ï¼ˆæ–°å¢ã€ä¿®æ”¹ï¼‰
void removeAttribute(String name) // æ ¹æ®å±æ€§åï¼Œåˆ é™¤å¯¹è±¡
```

### out è¾“å‡ºå’Œ response.getWriter è¾“å‡ºçš„åŒºåˆ«

response ä¸­è¡¨ç¤ºå“åº”ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨äºè®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹ (è¾“å‡º) 

out ä¹Ÿæ˜¯ç»™ç”¨æˆ·åšè¾“å‡ºä½¿ç”¨çš„

![](https://i.loli.net/2020/03/19/DejwGK6sXbkJO1U.jpg)

ç”±äº jsp ç¿»è¯‘ä¹‹åï¼Œåº•å±‚æºä»£ç éƒ½æ˜¯ä½¿ç”¨ out æ¥è¿›è¡Œè¾“å‡ºï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ jsp é¡µé¢ä¸­**ç»Ÿä¸€ä½¿ç”¨ out æ¥è¿›è¡Œè¾“å‡º**ï¼Œé¿å…æ‰“ä¹±é¡µé¢è¾“å‡ºå†…å®¹çš„é¡ºåºã€‚

`out.write()` è¾“å‡ºå­—ç¬¦ä¸²æ²¡æœ‰é—®é¢˜

`out.print()` è¾“å‡ºä»»æ„æ•°æ®éƒ½æ²¡æœ‰é—®é¢˜ï¼ˆéƒ½è½¬æ¢æˆä¸ºå­—ç¬¦ä¸²åè°ƒç”¨çš„ write è¾“å‡ºï¼‰

<span style="color: red">æ·±å…¥æºç ï¼Œæµ…å‡ºç»“è®º:åœ¨ jsp é¡µé¢ä¸­ï¼Œå¯ä»¥ç»Ÿä¸€ä½¿ç”¨ out.print()æ¥è¿›è¡Œè¾“å‡º</span>

## Listen ç›‘å¬å™¨

æ˜¯ JavaWeb çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€

> JavaWeb çš„ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Filter è¿‡æ»¤å™¨ã€Listener ç›‘å¬å™¨ã€‚

Listener å®ƒæ˜¯ JavaEE çš„è§„èŒƒï¼Œå°±æ˜¯æ¥å£ 

ç›‘å¬å™¨çš„ä½œç”¨æ˜¯ï¼Œç›‘å¬æŸç§äº‹ç‰©çš„å˜åŒ–ï¼Œç„¶åé€šè¿‡å›è°ƒå‡½æ•°ï¼Œåé¦ˆç»™å®¢æˆ·ï¼ˆç¨‹åºï¼‰å»åšä¸€äº›ç›¸åº”çš„å¤„ç†

#### ServletContextListener ç›‘å¬å™¨

å®ƒå¯ä»¥ç›‘å¬ ServletContext å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯

ServletContext å¯¹è±¡åœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯ï¼Œç›‘å¬åˆ°åˆ›å»ºå’Œé”€æ¯ä¹‹åéƒ½ä¼šåˆ†åˆ«è°ƒç”¨ ServletContextListener ç›‘å¬å™¨çš„æ–¹æ³•åé¦ˆã€‚

#### ä½¿ç”¨ ServletContextListener ç›‘å¬å™¨ç›‘å¬ ServletContext å¯¹è±¡

ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹:

1. ç¼–å†™ä¸€ä¸ªç±»å»å®ç° ServletContextListener
2. å®ç°å…¶ä¸¤ä¸ªå›è°ƒæ–¹æ³•
3. åˆ° web.xml ä¸­å»é…ç½®ç›‘å¬å™¨

## Cookie å’Œ Session

### Cookie

Cookieï¼ˆå®¢æˆ·ç«¯ï¼Œä¸æ˜¯å†…ç½®å¯¹è±¡ï¼‰ï¼šCookie æ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œå†å‘é€ç»™å®¢æˆ·ç«¯ä¿å­˜ï¼Œç›¸å½“äºæœ¬åœ°ç¼“å­˜çš„ä½œç”¨ -> æé«˜è®¿é—®æœåŠ¡ç«¯çš„æ•ˆç‡ï¼Œä½†æ˜¯å®‰å…¨æ€§è¾ƒå·®ã€‚

Cookie ä¸æ˜¯å†…ç½®å¯¹è±¡ï¼Œè¦ä½¿ç”¨å¿…é¡» new

Cookie: key=value

``` java
import javax.servlet.http.Cookie

public Cookie(String name, String value)
String getName() // è·å– name
String getValue() // è·å– value
void setMaxAge(int expiry) // è®¾ç½®æœ€å¤§æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
```

æœåŠ¡ç«¯å‡†å¤‡ Cookie ï¼š`response.addCookie(Cookie cookie)`	ï¼ˆresponse å¯¹è±¡ï¼‰

é¡µé¢è·³è½¬ï¼ˆè½¬å‘ã€é‡å®šå‘ï¼‰

å®¢æˆ·ç«¯è·å– Cookieï¼šrequese.getCookies()	ï¼ˆrequest å¯¹è±¡ï¼‰

**å®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥è·å–æŸä¸€ä¸ªå•ç‹¬å¯¹è±¡ï¼Œåªèƒ½ä¸€æ¬¡æ€§å°†å…¨éƒ¨çš„ cookie æ‹¿åˆ°**



### session

session ä¼šè¯ï¼ˆå¼€å§‹åˆ°ç»“æŸï¼‰

> æµè§ˆç½‘ç«™ï¼šå¼€å§‹-å…³é—­
>
> è´­ç‰©ï¼šæµè§ˆã€ä»˜æ¬¾ã€é€€å‡º
>
> ç”µå­é‚®ä»¶ï¼šæµè§ˆã€å†™é‚®ä»¶ã€é€€å‡º

åœ¨ Cookies ä¸­ï¼Œé™¤äº†è‡ªå·±è®¾ç½®çš„ Cookie å¯¹è±¡å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªåå­—ä¸º JSESSIONID çš„ Cookieï¼ˆåœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æœåŠ¡ç«¯è‡ªåŠ¨äº§ç”Ÿï¼‰

#### session æœºåˆ¶

1. å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼ˆJSESSIONID != sessionIDï¼‰ï¼ŒæœåŠ¡ç«¯ä¼šäº§ç”Ÿä¸€ä¸ª seesion å¯¹è±¡ï¼ˆç”¨äºä¿å­˜è¯¥å®¢æˆ·çš„ä¿¡æ¯ï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ª session å¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ sessionIDï¼ˆç”¨äºåŒºåˆ†å…¶ä»– sessionï¼‰ã€‚
2. æœåŠ¡ç«¯ä¼šäº§ç”Ÿä¸€ä¸ª Cookieï¼Œå¹¶ä¸”è¯¥ Cookie çš„ name=JSESSIONID, value=sessionID
3. æœåŠ¡ç«¯ä¼šåœ¨å“åº”å®¢æˆ·ç«¯çš„åŒæ—¶å°†è¯¥ Cookie å‘é€ç»™å®¢æˆ·ç«¯ï¼Œè‡³æ­¤å®¢æˆ·ç«¯å°±æœ‰äº†ä¸€ä¸ªåä¸º JSESSIONID çš„ Cookie
4. å› æ­¤å®¢æˆ·ç«¯çš„ Cookie å°±å¯ä»¥å’ŒæœåŠ¡ç«¯çš„ session å¯¹åº”ï¼ˆJSESSIONID = sessionIDï¼‰

* å®¢æˆ·ç«¯ç¬¬äºŒæ¬¡æˆ–ç¬¬ N æ¬¡è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå…ˆæ ¹æ®å®¢æˆ·ç«¯ Cookie ä¸­çš„ JSESSIONID å»æœåŠ¡ç«¯çš„ session ä¸­åŒ¹é… sessionIDï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œè¯´æ˜ä¸æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®

æ³¨æ„ï¼š

* session å­˜å‚¨åœ¨æœåŠ¡ç«¯

* session æ˜¯åœ¨åŒä¸€ä¸ªç”¨æˆ·ï¼ˆå®¢æˆ·ï¼‰è¯·æ±‚æ—¶å…±äº«
* å®ç°æœºåˆ¶ï¼šç¬¬ä¸€æ¬¡å®¢æˆ·è¯·æ±‚æ—¶äº§ç”Ÿä¸€ä¸ª sessionID å¹¶å¤åˆ¶ç»™ Cookie çš„ JSESSIONID ç„¶åå‘é€ç»™å®¢æˆ·ç«¯

#### session æ–¹æ³•

```java
String getId() // è·å– sessionID
boolean isNew() // åˆ¤æ–­æ˜¯å¦æ˜¯æ–°ç”¨æˆ·ï¼ˆç¬¬ä¸€æ¬¡è®¿é—®ï¼‰
void invalidate() // ä½¿ session å¤±æ•ˆï¼ˆé€€å‡ºç™»å½•ã€æ³¨é”€ï¼‰
  
void setAttribute()
Object getAttribute()
  
void setMaxInactiveInterval(ç§’) // è®¾ç½®æœ€å¤§æœ‰æ•ˆéæ´»åŠ¨æ—¶é—´
int getMaxInactiveInterval()
```

ç¤ºä¾‹ï¼š/session

#### session å’Œ Cookie çš„åŒºåˆ«

|   åŒºåˆ«ç‚¹   | session |  Cookie  |
| :--------: | :-----: | :------: |
| ä¿å­˜çš„ä½ç½® | æœåŠ¡ç«¯  |  å®¢æˆ·ç«¯  |
|   å®‰å…¨æ€§   | è¾ƒå®‰å…¨  | è¾ƒä¸å®‰å…¨ |
| ä¿å­˜çš„å†…å®¹ | Object  |  String  |

![](https://i.loli.net/2020/03/20/MsQDT96U3tp2Nul.jpg)

## Filter è¿‡æ»¤å™¨

* å®ƒæ˜¯ JavaWeb çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯: Servlet ç¨‹åºã€Listener ç›‘å¬å™¨ã€Filter è¿‡æ»¤å™¨
* å®ƒæ˜¯ JavaEE çš„è§„èŒƒï¼Œä¹Ÿå°±æ˜¯æ¥å£
* ä½œç”¨æ˜¯ï¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿‡æ»¤å“åº”

> æ‹¦æˆªè¯·æ±‚å¸¸è§çš„åº”ç”¨åœºæ™¯æœ‰: 
>
> 1. æƒé™æ£€æŸ¥
> 2. æ—¥è®°æ“ä½œ
> 3. äº‹åŠ¡ç®¡ç†
> 4. ...

ä¾‹ï¼šåœ¨ web å·¥ç¨‹ä¸‹ï¼Œæœ‰ä¸€ä¸ª admin ç›®å½•ã€‚è¿™ä¸ª admin ç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æºï¼ˆhtml é¡µé¢ã€jpg å›¾ç‰‡ã€jsp æ–‡ä»¶ã€ç­‰ç­‰ï¼‰éƒ½å¿…é¡»æ˜¯ç”¨æˆ·ç™»å½•ä¹‹åæ‰å…è®¸è®¿é—®ã€‚

![](https://i.loli.net/2020/03/20/4lQ63Tt5caXqwKe.jpg)

ä½¿ç”¨æ­¥éª¤:

1. ç¼–å†™ä¸€ä¸ªç±»å»å®ç° Filter æ¥å£
2. å®ç°è¿‡æ»¤æ–¹æ³• `doFilter()`
3. åˆ° web.xml ä¸­å»é…ç½® Filter çš„æ‹¦æˆªè·¯å¾„

### Filter è¿‡æ»¤å™¨çš„ç”Ÿå‘½å‘¨æœŸ

1. æ„é€ å™¨æ–¹æ³•

2. init åˆå§‹åŒ–æ–¹æ³•

   ç¬¬ 1ï¼Œ2 æ­¥ï¼Œåœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œï¼ˆFilter å·²ç»åˆ›å»ºï¼‰

3. doFilter è¿‡æ»¤æ–¹æ³•
   ç¬¬ 3 æ­¥ï¼Œæ¯æ¬¡æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œå°±ä¼šæ‰§è¡Œ

4. destroy é”€æ¯
    ç¬¬ 4 æ­¥ï¼Œåœæ­¢ web å·¥ç¨‹çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œï¼ˆåœæ­¢ web å·¥ç¨‹ï¼Œä¹Ÿä¼šé”€æ¯ Filter è¿‡æ»¤å™¨ï¼‰

### FilterConfig ç±»

å®ƒæ˜¯ Filter è¿‡æ»¤å™¨çš„é…ç½®æ–‡ä»¶ç±»ï¼ŒTomcat æ¯æ¬¡åˆ›å»º Filter çš„æ—¶å€™ï¼Œä¹Ÿä¼šåŒæ—¶åˆ›å»ºä¸€ä¸ª FilterConfig ç±»ï¼Œè¿™é‡ŒåŒ…å«äº† Filter é…ç½®æ–‡ä»¶çš„é…ç½®ä¿¡æ¯ã€‚

FilterConfig ç±»çš„ä½œç”¨æ˜¯è·å– filter è¿‡æ»¤å™¨çš„é…ç½®å†…å®¹

1. è·å– Filter çš„åç§° filter-name çš„å†…å®¹
2. è·å–åœ¨ Filter ä¸­é…ç½®çš„ init-param åˆå§‹åŒ–å‚æ•°
3. è·å– ServletContext å¯¹è±¡

### **FilterChain** è¿‡æ»¤å™¨é“¾

![](https://i.loli.net/2020/03/20/bGWzv3xku7M4TYP.jpg)

## JSON

JSON (JavaScript Object Notation) æ˜¯ä¸€ç§**è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼**ï¼Œæ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚

JSON é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œè€Œä¸”å¾ˆå¤šè¯­è¨€éƒ½æä¾›äº†å¯¹ json çš„æ”¯æŒï¼ˆåŒ…æ‹¬ C, C++, C#, Java, JavaScript, Perl, Python ç­‰ï¼‰ï¼Œè¿™æ ·å°±ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚

è½»é‡çº§æŒ‡çš„æ˜¯è·Ÿ xml åšæ¯”è¾ƒï¼Œæ•°æ®äº¤æ¢æŒ‡çš„æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¸šåŠ¡æ•°æ®çš„ä¼ é€’æ ¼å¼ã€‚

### JSON åœ¨ JavaScript ä¸­çš„ä½¿ç”¨

#### å®šä¹‰

JSON æ˜¯ç”±é”®å€¼å¯¹ç»„æˆï¼Œå¹¶ä¸”ç”±èŠ±æ‹¬å·ï¼ˆå¤§æ‹¬å·ï¼‰åŒ…å›´ï¼Œæ¯ä¸ªé”®ç”±å¼•å·å¼•èµ·æ¥ï¼Œé”®å’Œå€¼ä¹‹é—´ä½¿ç”¨å†’å·è¿›è¡Œåˆ†éš”ï¼Œ å¤šç»„é”®å€¼å¯¹ä¹‹é—´è¿›è¡Œé€—å·è¿›è¡Œåˆ†éš”ã€‚

``` javascript
var jsonObj = {
  "key1":12,
  "key2":abc,
  "key3":true,
  "key4":[11,"arr",false],
  "key5":{
    "key5_1":511,
    "key5_2":"key5_2_value"
  },
  "key6":[{
    "key6_1_1":6611,
    "key6_1_2":"key6_1_2_value"
  },{
    "key6_2_1":6621,
    "key6_2_2":"key6_2_2_value"
  }]
}
```

#### è®¿é—®

json æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œjson ä¸­çš„ key å¯ä»¥ç†è§£ä¸ºæ˜¯å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚

json ä¸­çš„ key è®¿é—®å°±è·Ÿè®¿é—®å¯¹è±¡çš„å±æ€§ä¸€æ ·: `json å¯¹è±¡.key`

``` javascript
alert(jsonObj.key1) // 12
alert(jsonObj.ket2) // abc

/// json ä¸­æ•°ç»„çš„éå†
for(var i = 0; i < jsonObj.key4.length; i++) {
  alert(jsonObj.key4[i]);
}

alert(jsonObj.key5.key5_1) // 511
```

#### å¸¸ç”¨æ–¹æ³•

json çš„å­˜åœ¨æœ‰ä¸¤ç§å½¢å¼ã€‚

ä¸€ç§æ˜¯ï¼šå¯¹è±¡çš„å½¢å¼å­˜åœ¨ --> json å¯¹è±¡

ä¸€ç§æ˜¯ï¼šå­—ç¬¦ä¸²çš„å½¢å¼å­˜åœ¨ --> json å­—ç¬¦ä¸²ã€‚

ä¸€èˆ¬è¦æ“ä½œ json ä¸­çš„æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦ json å¯¹è±¡çš„æ ¼å¼ï¼Œé€šå¸¸åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„æ—¶å€™ï¼Œä½¿ç”¨ json å­—ç¬¦ä¸²

`JSON.stringify()`ï¼šæŠŠ json å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²

`JSON.parse()`ï¼šæŠŠ json å­—ç¬¦ä¸²è½¬æ¢æˆä¸º json å¯¹è±¡

``` javascript
// æŠŠ json å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²
// ç‰¹åˆ«åƒ Java ä¸­å¯¹è±¡çš„ toString
var jsonObjString = JSON.stringify(jsonObj);
alert(jsonObjString);

// æŠŠ json å­—ç¬¦ä¸²ã€‚è½¬æ¢æˆä¸º json å¯¹è±¡
var jsonObj2 = JSON.parse(jsonObjString);
alert(jsonObj2.key1);// 12
alert(jsonObj2.key2);// abc
```

### JSON åœ¨ Java ä¸­çš„ä½¿ç”¨

#### JavaBean å’Œ JSON çš„äº’è½¬

jar åŒ…ä½¿ç”¨ gson

``` java
@Test
public void test1(){
  Person person = new Person(1, "å›½å“¥å¥½å¸…!");
  // åˆ›å»º Gson å¯¹è±¡å®ä¾‹
  Gson gson = new Gson();
  // toJson æ–¹æ³•å¯ä»¥æŠŠ java å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²
  String personJsonString = gson.toJson(person);
  System.out.println(personJsonString);
  // fromJson æŠŠ json å­—ç¬¦ä¸²è½¬æ¢å› Java å¯¹è±¡
  // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ json å­—ç¬¦ä¸²
  // ç¬¬äºŒä¸ªå‚æ•°æ˜¯è½¬æ¢å›å»çš„ Java å¯¹è±¡ç±»å‹
  Person person1 = gson.fromJson(personJsonString, Person.class);
  System.out.println(person1);
}
```

#### List å’Œ JSON çš„äº’è½¬

``` java
public class PersonListType() extends TypeToken<ArrayList<Person>> {}

@Test
public void test2() {
  List<Person> personList = new ArrayList<>();
  personList.add(new Person(1, "å›½å“¥"));
  personList.add(new Person(2, "åº·å¸ˆå‚…"));
  
  Gson gson = new Gson();
  // æŠŠ List è½¬æ¢ä¸º json å­—ç¬¦ä¸²
  String personListJsonString = gson.toJson(personList);
  System.out.println(personListJsonString);
  
  List<Person> list = gson.fromJson(personListJsonString, new PersonListType().getType());
  System.out.println(list);
  Person person = list.get(0);
  System.out.println(person);
}
```

#### map å’Œ JSON çš„äº’è½¬

``` java
@Test
public void test3(){
  Map<Integer,Person> personMap = new HashMap<>();
  personMap.put(1, new Person(1, "å›½å“¥å¥½å¸…"));
  personMap.put(2, new Person(2, "åº·å¸ˆå‚…ä¹Ÿå¥½å¸…"));
  
  Gson gson = new Gson();
  // æŠŠ map é›†åˆè½¬æ¢æˆä¸º json å­—ç¬¦ä¸²
  String personMapJsonString = gson.toJson(personMap);
  System.out.println(personMapJsonString);
  
  Map<Integer,Person> personMap2 = gson.fromJson(personMapJsonString, new TypeToken<HashMap<Integer,Person>>(){}.getType());
  System.out.println(personMap2);
  
  Person p = personMap2.get(1);
  System.out.println(p);
}
```

## AJAX

AJAX å³ Asynchronous Javascript And XML (å¼‚æ­¥ JavaScript å’Œ XML)ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚

ajax æ˜¯ä¸€ç§æµè§ˆå™¨é€šè¿‡ js å¼‚æ­¥å‘èµ·è¯·æ±‚ï¼Œå±€éƒ¨æ›´æ–°é¡µé¢çš„æŠ€æœ¯ã€‚

Ajax è¯·æ±‚çš„å±€éƒ¨æ›´æ–°ï¼Œæµè§ˆå™¨åœ°å€æ ä¸ä¼šå‘ç”Ÿå˜åŒ– å±€éƒ¨æ›´æ–°ä¸ä¼šèˆå¼ƒåŸæ¥é¡µé¢çš„å†…å®¹